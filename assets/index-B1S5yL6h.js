var Ks=Object.defineProperty;var Ts=(t,e,n)=>e in t?Ks(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ei=(t,e,n)=>Ts(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Ds="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ds);const Ir=1,Kr=2,xi=4,Rs=8,js=16,Bs=1,Ms=4,Ns=8,Fs=16,qs=4,$s=1,Ls=2,Z=Symbol(),zs=!1;var Tr=Array.isArray,Dr=Array.from,Us=Object.defineProperty,nt=Object.getOwnPropertyDescriptor,Vs=Object.getOwnPropertyDescriptors,Ys=Object.prototype,Ws=Array.prototype,Yn=Object.getPrototypeOf;function Gs(t){return typeof t=="function"}const ne=()=>{};function Hs(t){for(var e=0;e<t.length;e++)t[e]()}const ue=2,ki=4,Nt=8,Cn=16,le=32,Ft=64,Wn=128,We=256,fn=512,J=1024,Re=2048,qt=4096,de=8192,lt=16384,Ei=32768,$t=65536,Qs=1<<19,Pi=1<<20,bt=Symbol("$state"),Xs=Symbol("legacy props"),Js=Symbol("");function Oi(t){return t===this.v}function Si(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Ci(t){return!Si(t,this.v)}function Zs(t){throw new Error("effect_in_teardown")}function eo(){throw new Error("effect_in_unowned_derived")}function to(t){throw new Error("effect_orphan")}function no(){throw new Error("effect_update_depth_exceeded")}function ro(t){throw new Error("props_invalid_value")}function io(){throw new Error("state_descriptors_fixed")}function so(){throw new Error("state_prototype_fixed")}function oo(){throw new Error("state_unsafe_local_read")}function ao(){throw new Error("state_unsafe_mutation")}let Ai=!1;function se(t){return{f:0,v:t,reactions:null,equals:Oi,version:0}}function hn(t){return uo(se(t))}function Rr(t,e=!1){const n=se(t);return e||(n.equals=Ci),n}function uo(t){return D!==null&&D.f&ue&&(pe===null?_o([t]):pe.push(t)),t}function z(t,e){return D!==null&&bo()&&D.f&(ue|Cn)&&(pe===null||!pe.includes(t))&&ao(),Gn(t,e)}function Gn(t,e){return t.equals(e)||(t.v=e,t.version=zi(),Ii(t,Re),I!==null&&I.f&J&&!(I.f&le)&&(U!==null&&U.includes(t)?(me(I,Re),Tn(I)):De===null?go([t]):De.push(t))),e}function Ii(t,e){var n=t.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i],o=s.f;o&Re||(me(s,e),o&(J|We)&&(o&ue?Ii(s,qt):Tn(s)))}}function jr(t){var e=ue|Re;I===null?e|=We:I.f|=Pi;var n=D!==null&&D.f&ue?D:null;const r={children:null,ctx:G,deps:null,equals:Oi,f:e,fn:t,reactions:null,v:null,version:0,parent:n??I};return n!==null&&(n.children??(n.children=[])).push(r),r}function Ki(t){var e=t.children;if(e!==null){t.children=null;for(var n=0;n<e.length;n+=1){var r=e[n];r.f&ue?Br(r):Ne(r)}}}function lo(t){for(var e=t.parent;e!==null;){if(!(e.f&ue))return e;e=e.parent}return null}function Ti(t){var e,n=I;oe(lo(t));try{Ki(t),e=Ui(t)}finally{oe(n)}return e}function Di(t){var e=Ti(t),n=(et||t.f&We)&&t.deps!==null?qt:J;me(t,n),t.equals(e)||(t.v=e,t.version=zi())}function Br(t){Ki(t),It(t,0),me(t,lt),t.v=t.children=t.deps=t.ctx=t.reactions=null}function co(t){I===null&&D===null&&to(),D!==null&&D.f&We&&eo(),Nr&&Zs()}function fo(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function ct(t,e,n,r=!0){var i=(t&Ft)!==0,s=I,o={ctx:G,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:t|Re,first:null,fn:e,last:null,next:null,parent:i?null:s,prev:null,teardown:null,transitions:null,version:0};if(n){var l=rt;try{ti(!0),Kn(o),o.f|=Ei}catch(u){throw Ne(o),u}finally{ti(l)}}else e!==null&&Tn(o);var a=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&Pi)===0;if(!a&&!i&&r&&(s!==null&&fo(o,s),D!==null&&D.f&ue)){var f=D;(f.children??(f.children=[])).push(o)}return o}function Ri(t){const e=ct(Nt,null,!1);return me(e,J),e.teardown=t,e}function ho(t){co();var e=I!==null&&(I.f&le)!==0&&G!==null&&!G.m;if(e){var n=G;(n.e??(n.e=[])).push({fn:t,effect:I,reaction:D})}else{var r=An(t);return r}}function po(t){const e=ct(Ft,t,!0);return()=>{Ne(e)}}function An(t){return ct(ki,t,!1)}function vo(t){return ct(Nt,t,!0)}function At(t){return In(t)}function In(t,e=0){return ct(Nt|Cn|e,t,!0)}function at(t,e=!0){return ct(Nt|le,t,!0,e)}function ji(t){var e=t.teardown;if(e!==null){const n=Nr,r=D;ni(!0),ye(null);try{e.call(null)}finally{ni(n),ye(r)}}}function Bi(t){var e=t.deriveds;if(e!==null){t.deriveds=null;for(var n=0;n<e.length;n+=1)Br(e[n])}}function Mi(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){var r=n.next;Ne(n,e),n=r}}function yo(t){for(var e=t.first;e!==null;){var n=e.next;e.f&le||Ne(e),e=n}}function Ne(t,e=!0){var n=!1;if((e||t.f&Qs)&&t.nodes_start!==null){for(var r=t.nodes_start,i=t.nodes_end;r!==null;){var s=r===i?null:Rn(r);r.remove(),r=s}n=!0}Mi(t,e&&!n),Bi(t),It(t,0),me(t,lt);var o=t.transitions;if(o!==null)for(const a of o)a.stop();ji(t);var l=t.parent;l!==null&&l.first!==null&&Ni(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Ni(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Hn(t,e){var n=[];Mr(t,n,!0),Fi(n,()=>{Ne(t),e&&e()})}function Fi(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function Mr(t,e,n){if(!(t.f&de)){if(t.f^=de,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&$t)!==0||(r.f&le)!==0;Mr(r,e,s?n:!1),r=i}}}function dn(t){qi(t,!0)}function qi(t,e){if(t.f&de){zt(t)&&Kn(t),t.f^=de;for(var n=t.first;n!==null;){var r=n.next,i=(n.f&$t)!==0||(n.f&le)!==0;qi(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let Qn=!1,Xn=[];function mo(){Qn=!1;const t=Xn.slice();Xn=[],Hs(t)}function Lt(t){Qn||(Qn=!0,queueMicrotask(mo)),Xn.push(t)}function $i(t){throw new Error("lifecycle_outside_component")}let nn=!1,pn=!1,rt=!1,Nr=!1;function ti(t){rt=t}function ni(t){Nr=t}let Jn=[],wt=0;let D=null;function ye(t){D=t}let I=null;function oe(t){I=t}let pe=null;function _o(t){pe=t}let U=null,te=0,De=null;function go(t){De=t}let Li=0,et=!1,G=null;function zi(){return++Li}function bo(){return!Ai}function zt(t){var o,l;var e=t.f;if(e&Re)return!0;if(e&qt){var n=t.deps,r=(e&We)!==0;if(n!==null){var i;if(e&fn){for(i=0;i<n.length;i++)((o=n[i]).reactions??(o.reactions=[])).push(t);t.f^=fn}for(i=0;i<n.length;i++){var s=n[i];if(zt(s)&&Di(s),r&&I!==null&&!et&&!((l=s==null?void 0:s.reactions)!=null&&l.includes(t))&&(s.reactions??(s.reactions=[])).push(t),s.version>t.version)return!0}}r||me(t,J)}return!1}function wo(t,e){for(var n=e;n!==null;){if(n.f&Wn)try{n.fn(t);return}catch{n.f^=Wn}n=n.parent}throw nn=!1,t}function xo(t){return(t.f&lt)===0&&(t.parent===null||(t.parent.f&Wn)===0)}function Fr(t,e,n,r){if(nn){if(n===null&&(nn=!1),xo(e))throw t;return}n!==null&&(nn=!0);{wo(t,e);return}}function Ui(t){var c;var e=U,n=te,r=De,i=D,s=et,o=pe,l=G,a=t.f;U=null,te=0,De=null,D=a&(le|Ft)?null:t,et=!rt&&(a&We)!==0,pe=null,G=t.ctx;try{var f=(0,t.fn)(),u=t.deps;if(U!==null){var h;if(It(t,te),u!==null&&te>0)for(u.length=te+U.length,h=0;h<U.length;h++)u[te+h]=U[h];else t.deps=u=U;if(!et)for(h=te;h<u.length;h++)((c=u[h]).reactions??(c.reactions=[])).push(t)}else u!==null&&te<u.length&&(It(t,te),u.length=te);return f}finally{U=e,te=n,De=r,D=i,et=s,pe=o,G=l}}function ko(t,e){let n=e.reactions;if(n!==null){var r=n.indexOf(t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&e.f&ue&&(U===null||!U.includes(e))&&(me(e,qt),e.f&(We|fn)||(e.f^=fn),It(e,0))}function It(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)ko(t,n[r])}function Kn(t){var e=t.f;if(!(e&lt)){me(t,J);var n=I,r=G;I=t;try{e&Cn?yo(t):Mi(t),Bi(t),ji(t);var i=Ui(t);t.teardown=typeof i=="function"?i:null,t.version=Li}catch(s){Fr(s,t,n,r||t.ctx)}finally{I=n}}}function Eo(){wt>1e3&&(wt=0,no()),wt++}function Po(t){var e=t.length;if(e!==0){Eo();var n=rt;rt=!0;try{for(var r=0;r<e;r++){var i=t[r];i.f&J||(i.f^=J);var s=[];Vi(i,s),Oo(s)}}finally{rt=n}}}function Oo(t){var e=t.length;if(e!==0)for(var n=0;n<e;n++){var r=t[n];if(!(r.f&(lt|de)))try{zt(r)&&(Kn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Ni(r):r.fn=null))}catch(i){Fr(i,r,null,r.ctx)}}}function So(){if(pn=!1,wt>1001)return;const t=Jn;Jn=[],Po(t),pn||(wt=0)}function Tn(t){pn||(pn=!0,queueMicrotask(So));for(var e=t;e.parent!==null;){e=e.parent;var n=e.f;if(n&(Ft|le)){if(!(n&J))return;e.f^=J}}Jn.push(e)}function Vi(t,e){var n=t.first,r=[];e:for(;n!==null;){var i=n.f,s=(i&le)!==0,o=s&&(i&J)!==0,l=n.next;if(!o&&!(i&de))if(i&Nt){if(s)n.f^=J;else try{zt(n)&&Kn(n)}catch(h){Fr(h,n,null,n.ctx)}var a=n.first;if(a!==null){n=a;continue}}else i&ki&&r.push(n);if(l===null){let h=n.parent;for(;h!==null;){if(t===h)break e;var f=h.next;if(f!==null){n=f;continue e}h=h.parent}}n=l}for(var u=0;u<r.length;u++)a=r[u],e.push(a),Vi(a,e)}function K(t){var u;var e=t.f,n=(e&ue)!==0;if(n&&e&lt){var r=Ti(t);return Br(t),r}if(D!==null){pe!==null&&pe.includes(t)&&oo();var i=D.deps;U===null&&i!==null&&i[te]===t?te++:U===null?U=[t]:U.push(t),De!==null&&I!==null&&I.f&J&&!(I.f&le)&&De.includes(t)&&(me(I,Re),Tn(I))}else if(n&&t.deps===null)for(var s=t,o=s.parent,l=s;o!==null;)if(o.f&ue){var a=o;l=a,o=a.parent}else{var f=o;(u=f.deriveds)!=null&&u.includes(l)||(f.deriveds??(f.deriveds=[])).push(l);break}return n&&(s=t,zt(s)&&Di(s)),t.v}function Ue(t){const e=D;try{return D=null,t()}finally{D=e}}const Co=~(Re|qt|J);function me(t,e){t.f=t.f&Co|e}function ft(t,e=!1,n){G={p:G,c:null,e:null,m:!1,s:t,x:null,l:null}}function ht(t){const e=G;if(e!==null){const o=e.e;if(o!==null){var n=I,r=D;e.e=null;try{for(var i=0;i<o.length;i++){var s=o[i];oe(s.effect),ye(s.reaction),An(s.fn)}}finally{oe(n),ye(r)}}G=e.p,e.m=!0}return{}}function re(t,e=null,n){if(typeof t!="object"||t===null||bt in t)return t;const r=Yn(t);if(r!==Ys&&r!==Ws)return t;var i=new Map,s=Tr(t),o=se(0);s&&i.set("length",se(t.length));var l;return new Proxy(t,{defineProperty(a,f,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&io();var h=i.get(f);return h===void 0?(h=se(u.value),i.set(f,h)):z(h,re(u.value,l)),!0},deleteProperty(a,f){var u=i.get(f);if(u===void 0)f in a&&i.set(f,se(Z));else{if(s&&typeof f=="string"){var h=i.get("length"),c=Number(f);Number.isInteger(c)&&c<h.v&&z(h,c)}z(u,Z),ri(o)}return!0},get(a,f,u){var p;if(f===bt)return t;var h=i.get(f),c=f in a;if(h===void 0&&(!c||(p=nt(a,f))!=null&&p.writable)&&(h=se(re(c?a[f]:Z,l)),i.set(f,h)),h!==void 0){var d=K(h);return d===Z?void 0:d}return Reflect.get(a,f,u)},getOwnPropertyDescriptor(a,f){var u=Reflect.getOwnPropertyDescriptor(a,f);if(u&&"value"in u){var h=i.get(f);h&&(u.value=K(h))}else if(u===void 0){var c=i.get(f),d=c==null?void 0:c.v;if(c!==void 0&&d!==Z)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return u},has(a,f){var d;if(f===bt)return!0;var u=i.get(f),h=u!==void 0&&u.v!==Z||Reflect.has(a,f);if(u!==void 0||I!==null&&(!h||(d=nt(a,f))!=null&&d.writable)){u===void 0&&(u=se(h?re(a[f],l):Z),i.set(f,u));var c=K(u);if(c===Z)return!1}return h},set(a,f,u,h){var b;var c=i.get(f),d=f in a;if(s&&f==="length")for(var p=u;p<c.v;p+=1){var y=i.get(p+"");y!==void 0?z(y,Z):p in a&&(y=se(Z),i.set(p+"",y))}c===void 0?(!d||(b=nt(a,f))!=null&&b.writable)&&(c=se(void 0),z(c,re(u,l)),i.set(f,c)):(d=c.v!==Z,z(c,re(u,l)));var _=Reflect.getOwnPropertyDescriptor(a,f);if(_!=null&&_.set&&_.set.call(h,u),!d){if(s&&typeof f=="string"){var v=i.get("length"),m=Number(f);Number.isInteger(m)&&m>=v.v&&z(v,m+1)}ri(o)}return!0},ownKeys(a){K(o);var f=Reflect.ownKeys(a).filter(c=>{var d=i.get(c);return d===void 0||d.v!==Z});for(var[u,h]of i)h.v!==Z&&!(u in a)&&f.push(u);return f},setPrototypeOf(){so()}})}function ri(t,e=1){z(t,t.v+e)}var Zn,Yi,Wi;function Ao(){if(Zn===void 0){Zn=window;var t=Element.prototype,e=Node.prototype;Yi=nt(e,"firstChild").get,Wi=nt(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}function Dn(t=""){return document.createTextNode(t)}function vn(t){return Yi.call(t)}function Rn(t){return Wi.call(t)}function V(t,e){return vn(t)}function yn(t,e){{var n=vn(t);return n instanceof Comment&&n.data===""?Rn(n):n}}function ve(t,e=1,n=!1){let r=t;for(;e--;)r=Rn(r);return r}function Io(t){t.textContent=""}let Ko=!1;function To(t,e){{const n=document.body;t.autofocus=!0,Lt(()=>{document.activeElement===n&&t.focus()})}}function Do(t){var e=D,n=I;ye(null),oe(null);try{return t()}finally{ye(e),oe(n)}}const Gi=new Set,er=new Set;function Ro(t,e,n,r){function i(s){if(r.capture||mt.call(e,s),!s.cancelBubble)return Do(()=>n.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Lt(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function jo(t,e,n,r,i){var s={capture:r,passive:i},o=Ro(t,e,n,s);(e===document.body||e===window||e===document)&&Ri(()=>{e.removeEventListener(t,o,s)})}function jn(t){for(var e=0;e<t.length;e++)Gi.add(t[e]);for(var n of er)n(t)}function mt(t){var m;var e=this,n=e.ownerDocument,r=t.type,i=((m=t.composedPath)==null?void 0:m.call(t))||[],s=i[0]||t.target,o=0,l=t.__root;if(l){var a=i.indexOf(l);if(a!==-1&&(e===document||e===window)){t.__root=e;return}var f=i.indexOf(e);if(f===-1)return;a<=f&&(o=a)}if(s=i[o]||t.target,s!==e){Us(t,"currentTarget",{configurable:!0,get(){return s||n}});var u=D,h=I;ye(null),oe(null);try{for(var c,d=[];s!==null;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var y=s["__"+r];if(y!==void 0&&!s.disabled)if(Tr(y)){var[_,...v]=y;_.apply(s,[t,...v])}else y.call(s,t)}catch(b){c?d.push(b):c=b}if(t.cancelBubble||p===e||p===null)break;s=p}if(c){for(let b of d)queueMicrotask(()=>{throw b});throw c}}finally{t.__root=e,delete t.currentTarget,ye(u),oe(h)}}}function Bo(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function mn(t,e){var n=I;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function ce(t,e){var n=(e&$s)!==0,r=(e&Ls)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=Bo(s?t:"<!>"+t),n||(i=vn(i)));var o=r?document.importNode(i,!0):i.cloneNode(!0);if(n){var l=vn(o),a=o.lastChild;mn(l,a)}else mn(o,o);return o}}function Mo(t=""){{var e=Dn(t+"");return mn(e,e),e}}function tr(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Dn();return t.append(e,n),mn(e,n),t}function Q(t,e){t!==null&&t.before(e)}const No=["touchstart","touchmove"];function Fo(t){return No.includes(t)}let nr=!0;function xt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n==null?"":n+"")}function qo(t,e){return $o(t,e)}const He=new Map;function $o(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:o=!0}){Ao();var l=new Set,a=h=>{for(var c=0;c<h.length;c++){var d=h[c];if(!l.has(d)){l.add(d);var p=Fo(d);e.addEventListener(d,mt,{passive:p});var y=He.get(d);y===void 0?(document.addEventListener(d,mt,{passive:p}),He.set(d,1)):He.set(d,y+1)}}};a(Dr(Gi)),er.add(a);var f=void 0,u=po(()=>{var h=n??e.appendChild(Dn());return at(()=>{if(s){ft({});var c=G;c.c=s}i&&(r.$$events=i),nr=o,f=t(h,r)||{},nr=!0,s&&ht()}),()=>{var p;for(var c of l){e.removeEventListener(c,mt);var d=He.get(c);--d===0?(document.removeEventListener(c,mt),He.delete(c)):He.set(c,d)}er.delete(a),ii.delete(f),h!==n&&((p=h.parentNode)==null||p.removeChild(h))}});return ii.set(f,u),f}let ii=new WeakMap;function _n(t,e,n,r=null,i=!1){var s=t,o=null,l=null,a=null,f=i?$t:0;In(()=>{a!==(a=!!e())&&(a?(o?dn(o):o=at(()=>n(s)),l&&Hn(l,()=>{l=null})):(l?dn(l):r&&(l=at(()=>r(s))),o&&Hn(o,()=>{o=null})))},f)}function Hi(t,e){return e}function Lo(t,e,n,r){for(var i=[],s=e.length,o=0;o<s;o++)Mr(e[o].e,i,!0);var l=s>0&&i.length===0&&n!==null;if(l){var a=n.parentNode;Io(a),a.append(n),r.clear(),Ae(t,e[0].prev,e[s-1].next)}Fi(i,()=>{for(var f=0;f<s;f++){var u=e[f];l||(r.delete(u.k),Ae(t,u.prev,u.next)),Ne(u.e,!l)}})}function Qi(t,e,n,r,i,s=null){var o=t,l={flags:e,items:new Map,first:null},a=(e&xi)!==0;if(a){var f=t;o=f.appendChild(Dn())}var u=null,h=!1;In(()=>{var c=n(),d=Tr(c)?c:c==null?[]:Dr(c),p=d.length;if(!(h&&p===0)){h=p===0;{var y=D;zo(d,l,o,i,e,(y.f&de)!==0,r)}s!==null&&(p===0?u?dn(u):u=at(()=>s(o)):u!==null&&Hn(u,()=>{u=null})),n()}})}function zo(t,e,n,r,i,s,o){var j,ge,be,L;var l=(i&Rs)!==0,a=(i&(Ir|Kr))!==0,f=t.length,u=e.items,h=e.first,c=h,d,p=null,y,_=[],v=[],m,b,g,x;if(l)for(x=0;x<f;x+=1)m=t[x],b=o(m,x),g=u.get(b),g!==void 0&&((j=g.a)==null||j.measure(),(y??(y=new Set)).add(g));for(x=0;x<f;x+=1){if(m=t[x],b=o(m,x),g=u.get(b),g===void 0){var k=c?c.e.nodes_start:n;p=Vo(k,e,p,p===null?e.first:p.next,m,b,x,r,i),u.set(b,p),_=[],v=[],c=p.next;continue}if(a&&Uo(g,m,x,i),g.e.f&de&&(dn(g.e),l&&((ge=g.a)==null||ge.unfix(),(y??(y=new Set)).delete(g))),g!==c){if(d!==void 0&&d.has(g)){if(_.length<v.length){var w=v[0],O;p=w.prev;var E=_[0],T=_[_.length-1];for(O=0;O<_.length;O+=1)si(_[O],w,n);for(O=0;O<v.length;O+=1)d.delete(v[O]);Ae(e,E.prev,T.next),Ae(e,p,E),Ae(e,T,w),c=w,p=T,x-=1,_=[],v=[]}else d.delete(g),si(g,c,n),Ae(e,g.prev,g.next),Ae(e,g,p===null?e.first:p.next),Ae(e,p,g),p=g;continue}for(_=[],v=[];c!==null&&c.k!==b;)(s||!(c.e.f&de))&&(d??(d=new Set)).add(c),v.push(c),c=c.next;if(c===null)continue;g=c}_.push(g),p=g,c=g.next}if(c!==null||d!==void 0){for(var A=d===void 0?[]:Dr(d);c!==null;)(s||!(c.e.f&de))&&A.push(c),c=c.next;var N=A.length;if(N>0){var $=i&xi&&f===0?n:null;if(l){for(x=0;x<N;x+=1)(be=A[x].a)==null||be.measure();for(x=0;x<N;x+=1)(L=A[x].a)==null||L.fix()}Lo(e,A,$,u)}}l&&Lt(()=>{var fe;if(y!==void 0)for(g of y)(fe=g.a)==null||fe.apply()}),I.first=e.first&&e.first.e,I.last=p&&p.e}function Uo(t,e,n,r){r&Ir&&Gn(t.v,e),r&Kr?Gn(t.i,n):t.i=n}function Vo(t,e,n,r,i,s,o,l,a){var f=(a&Ir)!==0,u=(a&js)===0,h=f?u?Rr(i):se(i):i,c=a&Kr?se(o):o,d={i:c,v:h,k:s,a:null,e:null,prev:n,next:r};try{return d.e=at(()=>l(t,h,c),Ko),d.e.prev=n&&n.e,d.e.next=r&&r.e,n===null?e.first=d:(n.next=d,n.e.next=d.e),r!==null&&(r.prev=d,r.e.prev=d.e),d}finally{}}function si(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==r;){var o=Rn(s);i.before(s),s=o}}function Ae(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function rr(t,e,...n){var r=t,i=ne,s;In(()=>{i!==(i=e())&&(s&&(Ne(s),s=null),s=at(()=>i(r,...n)))},$t)}function kt(t,e,n,r){var i=t.__attributes??(t.__attributes={});i[e]!==(i[e]=n)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Js]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Yo(t).includes(e)?t[e]=n:t.setAttribute(e,n))}var oi=new Map;function Yo(t){var e=oi.get(t.nodeName);if(e)return e;oi.set(t.nodeName,e=[]);for(var n,r=Yn(t),i=Element.prototype;i!==r;){n=Vs(r);for(var s in n)n[s].set&&e.push(s);r=Yn(r)}return e}function Wo(t,e,n){if(n){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}const Go=()=>performance.now(),Te={tick:t=>requestAnimationFrame(t),now:()=>Go(),tasks:new Set};function Xi(t){Te.tasks.forEach(e=>{e.c(t)||(Te.tasks.delete(e),e.f())}),Te.tasks.size!==0&&Te.tick(Xi)}function Ho(t){let e;return Te.tasks.size===0&&Te.tick(Xi),{promise:new Promise(n=>{Te.tasks.add(e={c:t,f:n})}),abort(){Te.tasks.delete(e)}}}function Wt(t,e){t.dispatchEvent(new CustomEvent(e))}function Qo(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function ai(t){const e={},n=t.split(";");for(const r of n){const[i,s]=r.split(":");if(!i||s===void 0)break;const o=Qo(i.trim());e[o]=s.trim()}return e}const Xo=t=>t;function ui(t,e,n,r){var i=(t&qs)!==0,s="both",o,l=e.inert,a,f;function u(){var y=D,_=I;ye(null),oe(null);try{return o??(o=n()(e,(r==null?void 0:r())??{},{direction:s}))}finally{ye(y),oe(_)}}var h={is_global:i,in(){e.inert=l,Wt(e,"introstart"),a=ir(e,u(),f,1,()=>{Wt(e,"introend"),a==null||a.abort(),a=o=void 0})},out(y){e.inert=!0,Wt(e,"outrostart"),f=ir(e,u(),a,0,()=>{Wt(e,"outroend"),y==null||y()})},stop:()=>{a==null||a.abort(),f==null||f.abort()}},c=I;if((c.transitions??(c.transitions=[])).push(h),nr){var d=i;if(!d){for(var p=c.parent;p&&p.f&$t;)for(;(p=p.parent)&&!(p.f&Cn););d=!p||(p.f&Ei)!==0}d&&An(()=>{Ue(()=>h.in())})}}function ir(t,e,n,r,i){var s=r===1;if(Gs(e)){var o,l=!1;return Lt(()=>{if(!l){var _=e({direction:s?"in":"out"});o=ir(t,_,n,r,i)}}),{abort:()=>{l=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(n==null||n.deactivate(),!(e!=null&&e.duration))return i(),{abort:ne,deactivate:ne,reset:ne,t:()=>r};const{delay:a=0,css:f,tick:u,easing:h=Xo}=e;var c=[];if(s&&n===void 0&&(u&&u(0,1),f)){var d=ai(f(0,1));c.push(d,d)}var p=()=>1-r,y=t.animate(c,{duration:a});return y.onfinish=()=>{var _=(n==null?void 0:n.t())??1-r;n==null||n.abort();var v=r-_,m=e.duration*Math.abs(v),b=[];if(m>0){if(f)for(var g=Math.ceil(m/16.666666666666668),x=0;x<=g;x+=1){var k=_+v*h(x/g),w=f(k,1-k);b.push(ai(w))}p=()=>{var O=y.currentTime;return _+v*h(O/m)},u&&Ho(()=>{if(y.playState!=="running")return!1;var O=p();return u(O,1-O),!0})}y=t.animate(b,{duration:m,fill:"forwards"}),y.onfinish=()=>{p=()=>r,u==null||u(r,1-r),i()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=ne)},deactivate:()=>{i=ne},reset:()=>{r===0&&(u==null||u(1,0))},t:()=>p()}}function li(t,e){return t===e||(t==null?void 0:t[bt])===e}function Jo(t={},e,n,r){return An(()=>{var i,s;return vo(()=>{i=s,s=[],Ue(()=>{t!==n(...s)&&(e(t,...s),i&&li(n(...i),t)&&e(null,...i))})}),()=>{Lt(()=>{s&&li(n(...s),t)&&e(null,...s)})}}),t}function Zo(t){G===null&&$i(),ho(()=>{const e=Ue(t);if(typeof e=="function")return e})}function ea(t){G===null&&$i(),Zo(()=>()=>Ue(t))}function ta(t,e,n){if(t==null)return e(void 0),ne;const r=Ue(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}let Gt=!1;function qr(t,e,n){const r=n[e]??(n[e]={store:null,source:Rr(void 0),unsubscribe:ne});if(r.store!==t)if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=ne;else{var i=!0;r.unsubscribe=ta(t,s=>{i?r.source.v=s:z(r.source,s)}),i=!1}return K(r.source)}function na(t,e){return t.set(e),e}function $r(){const t={};return Ri(()=>{for(var e in t)t[e].unsubscribe()}),t}function ra(t,e,n=1){return t.set(e+n),e}function ia(t){var e=Gt;try{return Gt=!1,[t(),Gt]}finally{Gt=e}}function sa(t){for(var e=I,n=I;e!==null&&!(e.f&(le|Ft));)e=e.parent;try{return oe(e),t()}finally{oe(n)}}function tt(t,e,n,r){var k;var i=(n&Bs)!==0,s=!Ai,o=(n&Ns)!==0,l=(n&Fs)!==0,a=!1,f;o?[f,a]=ia(()=>t[e]):f=t[e];var u=bt in t||Xs in t,h=((k=nt(t,e))==null?void 0:k.set)??(u&&o&&e in t?w=>t[e]=w:void 0),c=r,d=!0,p=!1,y=()=>(p=!0,d&&(d=!1,l?c=Ue(r):c=r),c);f===void 0&&r!==void 0&&(h&&s&&ro(),f=y(),h&&h(f));var _;if(_=()=>{var w=t[e];return w===void 0?y():(d=!0,p=!1,w)},!(n&Ms))return _;if(h){var v=t.$$legacy;return function(w,O){return arguments.length>0?((!O||v||a)&&h(O?_():w),w):_()}}var m=!1,b=!1,g=Rr(f),x=sa(()=>jr(()=>{var w=_(),O=K(g);return m?(m=!1,b=!0,O):(b=!1,g.v=w)}));return i||(x.equals=Ci),function(w,O){if(arguments.length>0){const E=O?K(x):o?re(w):w;return x.equals(E)||(m=!0,z(g,E),p&&c!==void 0&&(c=E),Ue(()=>K(x))),w}return K(x)}}function oa(t,e){t.code==="Space"&&e()}var aa=ce('<div class="card svelte-1enngss" role="button"><div class="card-front svelte-1enngss"></div> <div class="card-back svelte-1enngss"><!></div></div>');function ua(t,e){ft(e,!0);let n=tt(e,"index",3,0),r=tt(e,"item",19,()=>({index:0,type:0,backfaceIsUp:!1})),i=tt(e,"flippable",3,!0),s=tt(e,"flipped",3,!1);function o(){i()&&!s()&&e.flip(r())}var l=aa();l.__click=o,l.__keyup=[oa,o];var a=ve(V(l),2),f=V(a);rr(f,()=>e.children??ne),At(()=>{kt(l,"data-testid",`card-${r().type??""}`),kt(l,"tabindex",n()+1),Wo(l,"toggled",s())}),Q(t,l),ht()}jn(["click","keyup"]);const Qe=[];function la(t,e=ne){let n=null;const r=new Set;function i(l){if(Si(t,l)&&(t=l,n)){const a=!Qe.length;for(const f of r)f[1](),Qe.push(f,t);if(a){for(let f=0;f<Qe.length;f+=2)Qe[f][0](Qe[f+1]);Qe.length=0}}}function s(l){i(l(t))}function o(l,a=ne){const f=[l,a];return r.add(f),r.size===1&&(n=e(i,s)||ne),l(t),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}const gn=la(0);var ca=ce('<div class="full-grid disable-text-selection svelte-1mw4cvk"></div>');function fa(t,e){ft(e,!0);const n=$r(),r=()=>qr(gn,"$moveCount",n);let i=tt(e,"puzzle",27,()=>re([])),s=hn(re([]));function o(d,...p){return new Promise(y=>setTimeout(y,d,...p))}function l(d){d.backfaceIsUp=!1}function a(){i().length===i().filter(p=>p.backfaceIsUp).length&&o(300).then(()=>{e.completed()})}function f(){const d=[o(600,K(s)[1]).then(l),o(800,K(s)[0]).then(l)];Promise.all(d).then(()=>z(s,re([])))}function u(){return K(s)[0].type===K(s)[1].type}function h(d){d.backfaceIsUp=!d.backfaceIsUp,z(s,re([...K(s),d])),K(s).length>=2&&(ra(gn,r()),u()?(z(s,re([])),a()):f())}var c=ca();Qi(c,21,i,Hi,(d,p,y)=>{var _=jr(()=>K(s).length<2);ua(d,{index:y,get item(){return K(p)},get flipped(){return K(p).backfaceIsUp},flip:h,get flippable(){return K(_)},children:(v,m)=>{var b=Mo();At(()=>xt(b,K(p).type.toString())),Q(v,b)},$$slots:{default:!0}})}),Q(t,c),ht()}var ha=ce('<button class="button"><span class="icon svelte-glkhk4"><svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg></span> Records</button>');function da(t,e){var n=ha();n.__click=function(...r){var i;(i=e.onclick)==null||i.apply(this,r)},Q(t,n)}jn(["click"]);function pa(t){return--t*t*t*t*t+1}function va(t){return-.5*(Math.cos(Math.PI*t)-1)}const ya=t=>t;function ma(t){const e=t-1;return e*e*e+1}function _a(t,{delay:e=0,duration:n=400,easing:r=ya}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:s=>`opacity: ${s*i}`}}function ga(t,{delay:e=0,duration:n=400,easing:r=ma,axis:i="y"}={}){const s=getComputedStyle(t),o=+s.opacity,l=i==="y"?"height":"width",a=parseFloat(s[l]),f=i==="y"?["top","bottom"]:["left","right"],u=f.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),h=parseFloat(s[`padding${u[0]}`]),c=parseFloat(s[`padding${u[1]}`]),d=parseFloat(s[`margin${u[0]}`]),p=parseFloat(s[`margin${u[1]}`]),y=parseFloat(s[`border${u[0]}Width`]),_=parseFloat(s[`border${u[1]}Width`]);return{delay:e,duration:n,easing:r,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*o};${l}: ${v*a}px;padding-${f[0]}: ${v*h}px;padding-${f[1]}: ${v*c}px;margin-${f[0]}: ${v*d}px;margin-${f[1]}: ${v*p}px;border-${f[0]}-width: ${v*y}px;border-${f[1]}-width: ${v*_}px;`}}var ba=ce('<div class="modal-overlay svelte-1hm6iu8"><div class="modal-backdrop svelte-1hm6iu8"></div> <div class="modal svelte-1hm6iu8" role="dialog" aria-modal="true"><!> <!></div></div>');function wa(t,e){ft(e,!0);let n=hn(void 0);const r=u=>{if(u.key==="Escape"){e.close();return}if(u.key==="Tab"){const h=K(n).querySelectorAll("*"),c=Array.from(h).filter(p=>p.tabIndex>=0);let d=c.indexOf(document.activeElement);d===-1&&u.shiftKey&&(d=0),d+=c.length+(u.shiftKey?-1:1),d%=c.length,c[d].focus(),u.preventDefault()}},i=typeof document<"u"&&document.activeElement;i&&ea(()=>{i.focus()});var s=ba();jo("keydown",Zn,r);var o=V(s);o.__pointerdown=function(...u){var h;(h=e.close)==null||h.apply(this,u)};var l=ve(o,2),a=V(l);_n(a,()=>e.header,u=>{var h=tr(),c=yn(h);rr(c,()=>e.header),Q(u,h)});var f=ve(a,2);_n(f,()=>e.content,u=>{var h=tr(),c=yn(h);rr(c,()=>e.content),Q(u,h)}),Jo(l,u=>z(n,u),()=>K(n)),ui(3,o,()=>_a,()=>({duration:600,easing:va})),ui(3,l,()=>ga,()=>({duration:600,easing:pa})),Q(t,s),ht()}jn(["pointerdown"]);const xa=(t,e)=>t.reduce((n,r,i,s,o=r[e])=>((n[o]||(n[o]=[])).push(r),n),{}),B=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,F=Object.keys,W=Array.isArray;function X(t,e){return typeof e!="object"||F(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||B.Promise||(B.Promise=Promise);const Kt=Object.getPrototypeOf,ka={}.hasOwnProperty;function ie(t,e){return ka.call(t,e)}function ut(t,e){typeof e=="function"&&(e=e(Kt(t))),(typeof Reflect>"u"?F:Reflect.ownKeys)(e).forEach(n=>{Pe(t,n,e[n])})}const Ji=Object.defineProperty;function Pe(t,e,n,r){Ji(t,e,X(n&&ie(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function it(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Pe(t.prototype,"constructor",t),{extend:ut.bind(null,t.prototype)}}}}const Ea=Object.getOwnPropertyDescriptor;function Lr(t,e){let n;return Ea(t,e)||(n=Kt(t))&&Lr(n,e)}const Pa=[].slice;function bn(t,e,n){return Pa.call(t,e,n)}function Zi(t,e){return e(t)}function _t(t){if(!t)throw new Error("Assertion Failed")}function es(t){B.setImmediate?setImmediate(t):setTimeout(t,0)}function ts(t,e){return t.reduce((n,r,i)=>{var s=e(r,i);return s&&(n[s[0]]=s[1]),n},{})}function Oe(t,e){if(typeof e=="string"&&ie(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var s=Oe(t,e[r]);n.push(s)}return n}var o=e.indexOf(".");if(o!==-1){var l=t[e.substr(0,o)];return l===void 0?void 0:Oe(l,e.substr(o+1))}}function ae(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){_t(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)ae(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),l=e.substr(s+1);if(l==="")n===void 0?W(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var a=t[o];a&&ie(t,o)||(a=t[o]={}),ae(a,l,n)}}else n===void 0?W(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function ns(t){var e={};for(var n in t)ie(t,n)&&(e[n]=t[n]);return e}const Oa=[].concat;function rs(t){return Oa.apply([],t)}const is="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(rs([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>B[t]),Sa=is.map(t=>B[t]);ts(is,t=>[t,!0]);let Ie=null;function Ut(t){Ie=typeof WeakMap<"u"&&new WeakMap;const e=sr(t);return Ie=null,e}function sr(t){if(!t||typeof t!="object")return t;let e=Ie&&Ie.get(t);if(e)return e;if(W(t)){e=[],Ie&&Ie.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(sr(t[n]))}else if(Sa.indexOf(t.constructor)>=0)e=t;else{const s=Kt(t);for(var i in e=s===Object.prototype?{}:Object.create(s),Ie&&Ie.set(t,e),t)ie(t,i)&&(e[i]=sr(t[i]))}return e}const{toString:Ca}={};function or(t){return Ca.call(t).slice(8,-1)}const ar=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Aa=typeof ar=="symbol"?function(t){var e;return t!=null&&(e=t[ar])&&e.apply(t)}:function(){return null},Ze={};function ke(t){var e,n,r,i;if(arguments.length===1){if(W(t))return t.slice();if(this===Ze&&typeof t=="string")return[t];if(i=Aa(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const zr=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var _e=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ss(t,e){_e=t,os=e}var os=()=>!0;const Ia=!new Error("").stack;function Ge(){if(Ia)try{throw Ge.arguments,new Error}catch(t){return t}return new Error}function ur(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(os).map(r=>`
`+r).join("")):""}var as=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ur=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(as),Ka={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function st(t,e){this._e=Ge(),this.name=t,this.message=e}function us(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function wn(t,e,n,r){this._e=Ge(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=us(t,e)}function Et(t,e){this._e=Ge(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=us(t,e)}it(st).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+ur(this._e,2))}},toString:function(){return this.name+": "+this.message}}),it(wn).from(st),it(Et).from(st);var Vr=Ur.reduce((t,e)=>(t[e]=e+"Error",t),{});const Ta=st;var C=Ur.reduce((t,e)=>{var n=e+"Error";function r(i,s){this._e=Ge(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=Ka[e]||n,this.inner=null)}return it(r).from(Ta),t[e]=r,t},{});C.Syntax=SyntaxError,C.Type=TypeError,C.Range=RangeError;var ci=as.reduce((t,e)=>(t[e+"Error"]=C[e],t),{}),rn=Ur.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=C[e]),t),{});function R(){}function Tt(t){return t}function Da(t,e){return t==null||t===Tt?e:function(n){return e(t(n))}}function Ve(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Ra(t,e){return t===R?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ve(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ve(i,this.onerror):i),s!==void 0?s:n}}function ja(t,e){return t===R?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ve(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ve(r,this.onerror):r)}}function Ba(t,e){return t===R?e:function(n){var r=t.apply(this,arguments);X(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ve(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Ve(s,this.onerror):s),r===void 0?o===void 0?void 0:o:X(r,o)}}function Ma(t,e){return t===R?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Yr(t,e){return t===R?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}rn.ModifyError=wn,rn.DexieError=st,rn.BulkError=Et;var Dt={};const ls=100,[lr,xn,cr]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Kt(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Kt(e),t]})(),cs=xn&&xn.then,sn=lr&&lr.constructor,Wr=!!cr;var fr=!1,Na=cr?()=>{cr.then(Ht)}:B.setImmediate?setImmediate.bind(null,Ht):B.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Ht(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Ht,0)},Pt=function(t,e){gt.push([t,e]),kn&&(Na(),kn=!1)},hr=!0,kn=!0,$e=[],on=[],dr=null,pr=Tt,ot={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:di,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{di(t[0],t[1])}catch{}})}},S=ot,gt=[],Le=0,an=[];function P(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=R,this._lib=!1;var e=this._PSD=S;if(_e&&(this._stackHolder=Ge(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Dt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&yr(this,this._value))}this._state=null,this._value=null,++e.ref,hs(this,t)}const vr={get:function(){var t=S,e=En;function n(r,i){var s=!t.global&&(t!==S||e!==En);const o=s&&!Se();var l=new P((a,f)=>{Gr(this,new fs(Pn(r,t,s,o),Pn(i,t,s,o),a,f,t))});return _e&&vs(l,this),l}return n.prototype=Dt,n},set:function(t){Pe(this,"then",t&&t.prototype===Dt?vr:{get:function(){return t},set:vr.set})}};function fs(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function hs(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Vt();n&&typeof n.then=="function"?hs(t,(i,s)=>{n instanceof P?n._then(i,s):n.then(i,s)}):(t._state=!0,t._value=n,ds(t)),r&&Yt()}},yr.bind(null,t))}catch(n){yr(t,n)}}function yr(t,e){if(on.push(e),t._state===null){var n=t._lib&&Vt();e=pr(e),t._state=!1,t._value=e,_e&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,s){try{r.apply(null,s)}catch{}}(()=>{var r=Lr(e,"stack");e._promise=t,Pe(e,"stack",{get:()=>fr?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){$e.some(i=>i._value===r._value)||$e.push(r)}(t),ds(t),n&&Yt()}}function ds(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Gr(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Le===0&&(++Le,Pt(()=>{--Le==0&&Hr()},[]))}function Gr(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Le,Pt(Fa,[n,t,e])}else t._listeners.push(e)}function Fa(t,e,n){try{dr=e;var r,i=e._value;e._state?r=t(i):(on.length&&(on=[]),r=t(i),on.indexOf(i)===-1&&function(s){for(var o=$e.length;o;)if($e[--o]._value===s._value)return void $e.splice(o,1)}(e)),n.resolve(r)}catch(s){n.reject(s)}finally{dr=null,--Le==0&&Hr(),--n.psd.ref||n.psd.finalize()}}function ps(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,s,o=t._value;o!=null?(i=o.name||"Error",s=o.message||o,r=ur(o,0)):(i=o,s=""),e.push(i+(s?": "+s:"")+r)}return _e&&((r=ur(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&ps(t._prev,e,n)),e}function vs(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Ht(){Vt()&&Yt()}function Vt(){var t=hr;return hr=!1,kn=!1,t}function Yt(){var t,e,n;do for(;gt.length>0;)for(t=gt,gt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(gt.length>0);hr=!0,kn=!0}function Hr(){var t=$e;$e=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=an.slice(0),n=e.length;n;)e[--n]()}function Qt(t){return new P(Dt,!1,t)}function M(t,e){var n=S;return function(){var r=Vt(),i=S;try{return Be(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{Be(i,!1),r&&Yt()}}}ut(P.prototype,{then:vr,_then:function(t,e){Gr(this,new fs(null,null,t,e,S))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Qt(r)):this.then(null,r=>r&&r.name===e?n(r):Qt(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Qt(e)))},stack:{get:function(){if(this._stack)return this._stack;try{fr=!0;var t=ps(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{fr=!1}}},timeout:function(t,e){return t<1/0?new P((n,r)=>{var i=setTimeout(()=>r(new C.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Pe(P.prototype,Symbol.toStringTag,"Dexie.Promise"),ot.env=ys(),ut(P,{all:function(){var t=ke.apply(null,arguments).map(Xt);return new P(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,s)=>P.resolve(i).then(o=>{t[s]=o,--r||e(t)},n))})},resolve:t=>{if(t instanceof P)return t;if(t&&typeof t.then=="function")return new P((n,r)=>{t.then(n,r)});var e=new P(Dt,!0,t);return vs(e,dr),e},reject:Qt,race:function(){var t=ke.apply(null,arguments).map(Xt);return new P((e,n)=>{t.map(r=>P.resolve(r).then(e,n))})},PSD:{get:()=>S,set:t=>S=t},totalEchoes:{get:()=>En},newPSD:je,usePSD:pt,scheduler:{get:()=>Pt,set:t=>{Pt=t}},rejectionMapper:{get:()=>pr,set:t=>{pr=t}},follow:(t,e)=>new P((n,r)=>je((i,s)=>{var o=S;o.unhandleds=[],o.onunhandled=s,o.finalize=Ve(function(){(function(l){function a(){l(),an.splice(an.indexOf(a),1)}an.push(a),++Le,Pt(()=>{--Le==0&&Hr()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),t()},e,n,r))}),sn&&(sn.allSettled&&Pe(P,"allSettled",function(){const t=ke.apply(null,arguments).map(Xt);return new P(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,s)=>P.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--n||e(r)))})}),sn.any&&typeof AggregateError<"u"&&Pe(P,"any",function(){const t=ke.apply(null,arguments).map(Xt);return new P((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((s,o)=>P.resolve(s).then(l=>e(l),l=>{i[o]=l,--r||n(new AggregateError(i))}))})}));const Y={awaits:0,echoes:0,id:0};var qa=0,un=[],Fn=0,En=0,$a=0;function je(t,e,n,r){var i=S,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++$a;var o=ot.env;s.env=Wr?{Promise:P,PromiseProp:{value:P,configurable:!0,writable:!0},all:P.all,race:P.race,allSettled:P.allSettled,any:P.any,resolve:P.resolve,reject:P.reject,nthen:fi(o.nthen,s),gthen:fi(o.gthen,s)}:{},e&&X(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=pt(s,t,n,r);return s.ref===0&&s.finalize(),l}function dt(){return Y.id||(Y.id=++qa),++Y.awaits,Y.echoes+=ls,Y.id}function Se(){return!!Y.awaits&&(--Y.awaits==0&&(Y.id=0),Y.echoes=Y.awaits*ls,!0)}function Xt(t){return Y.echoes&&t&&t.constructor===sn?(dt(),t.then(e=>(Se(),e),e=>(Se(),q(e)))):t}function La(t){++En,Y.echoes&&--Y.echoes!=0||(Y.echoes=Y.id=0),un.push(S),Be(t,!0)}function za(){var t=un[un.length-1];un.pop(),Be(t,!1)}function Be(t,e){var n=S;if((e?!Y.echoes||Fn++&&t===S:!Fn||--Fn&&t===S)||ms(e?La.bind(null,t):za),t!==S&&(S=t,n===ot&&(ot.env=ys()),Wr)){var r=ot.env.Promise,i=t.env;xn.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(B,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function ys(){var t=B.Promise;return Wr?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(B,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:xn.then,gthen:t.prototype.then}:{}}function pt(t,e,n,r,i){var s=S;try{return Be(t,!0),e(n,r,i)}finally{Be(s,!1)}}function ms(t){cs.call(lr,t)}function Pn(t,e,n,r){return typeof t!="function"?t:function(){var i=S;n&&dt(),Be(e,!0);try{return t.apply(this,arguments)}finally{Be(i,!1),r&&ms(Se)}}}function fi(t,e){return function(n,r){return t.call(this,Pn(n,e),Pn(r,e))}}(""+cs).indexOf("[native code]")===-1&&(dt=Se=R);const hi="unhandledrejection";function di(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(B.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(hi,!0,!0),X(r,i)):B.CustomEvent&&X(r=new CustomEvent(hi,{detail:i}),i),r&&B.dispatchEvent&&(dispatchEvent(r),!B.PromiseRejectionEvent&&B.onunhandledrejection))try{B.onunhandledrejection(r)}catch{}_e&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var q=P.reject;function mr(t,e,n,r){if(t.idbdb&&(t._state.openComplete||S.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===Vr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>mr(t,e,n,r))):q(s)}return i._promise(e,(s,o)=>je(()=>(S.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(t._state.openComplete)return q(new C.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return q(new C.DatabaseClosed);t.open().catch(R)}return t._state.dbReadyPromise.then(()=>mr(t,e,n,r))}const pi="3.2.5",qe="￿",_r=-1/0,we="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",_s="String expected.",Ot=[],Bn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ua=Bn,Va=Bn,gs=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Mn="__dbnames",qn="readonly",$n="readwrite";function Ye(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const bs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Jt(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=Ut(e))[t],e)}class Ya{_trans(e,n,r){const i=this._tx||S.trans,s=this.name;function o(a,f,u){if(!u.schema[s])throw new C.NotFound("Table "+s+" not part of transaction");return n(u.idbtrans,u)}const l=Vt();try{return i&&i.db===this.db?i===S.trans?i._promise(e,o,r):je(()=>i._promise(e,o,r),{trans:i,transless:S.transless||S}):mr(this.db,e,[this.name],o)}finally{l&&Yt()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(W(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=F(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(f=>{if(f.compound&&n.every(u=>f.keyPath.indexOf(u)>=0)){for(let u=0;u<n.length;++u)if(n.indexOf(f.keyPath[u])===-1)return!1;return!0}return!1}).sort((f,u)=>f.keyPath.length-u.keyPath.length)[0];if(r&&this.db._maxKey!==qe){const f=r.keyPath.slice(0,n.length);return this.where(f).equals(f.map(u=>e[u]))}!r&&_e&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(f,u){try{return s.cmp(f,u)===0}catch{return!1}}const[l,a]=n.reduce(([f,u],h)=>{const c=i[h],d=e[h];return[f||c,f||!c?Ye(u,c&&c.multi?p=>{const y=Oe(p,h);return W(y)&&y.some(_=>o(d,_))}:p=>o(d,Oe(p,h))):u]},[null,null]);return l?this.where(l.name).equals(e[l.keyPath]).filter(a):r?this.filter(a):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,W(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var s in r)if(ie(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){X(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=Jt(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?P.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{ae(e,i,o)}catch{}return o})}update(e,n){if(typeof e!="object"||W(e))return this.where(":id").equals(e).modify(n);{const r=Oe(e,this.schema.primKey.keyPath);if(r===void 0)return q(new C.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?F(n).forEach(i=>{ae(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=Jt(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?P.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{ae(e,i,o)}catch{}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?P.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:bs})).then(e=>e.numFailures?P.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&i)throw new C.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new C.InvalidArgument("Arguments objects and keys must have the same length");const f=e.length;let u=a&&l?e.map(Jt(a)):e;return this.core.mutate({trans:o,type:"add",keys:i,values:u,wantResults:s}).then(({numFailures:h,results:c,lastResult:d,failures:p})=>{if(h===0)return s?c:d;throw new Et(`${this.name}.bulkAdd(): ${h} of ${f} operations failed`,p)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&i)throw new C.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new C.InvalidArgument("Arguments objects and keys must have the same length");const f=e.length;let u=a&&l?e.map(Jt(a)):e;return this.core.mutate({trans:o,type:"put",keys:i,values:u,wantResults:s}).then(({numFailures:h,results:c,lastResult:d,failures:p})=>{if(h===0)return s?c:d;throw new Et(`${this.name}.bulkPut(): ${h} of ${f} operations failed`,p)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new Et(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function St(t){var e={},n=function(o,l){if(l){for(var a=arguments.length,f=new Array(a-1);--a;)f[a-1]=arguments[a];return e[o].subscribe.apply(null,f),t}if(typeof o=="string")return e[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,l,a){if(typeof o!="object"){var f;l||(l=Ma),a||(a=R);var u={subscribers:[],fire:a,subscribe:function(h){u.subscribers.indexOf(h)===-1&&(u.subscribers.push(h),u.fire=l(u.fire,h))},unsubscribe:function(h){u.subscribers=u.subscribers.filter(function(c){return c!==h}),u.fire=u.subscribers.reduce(l,a)}};return e[o]=n[o]=u,u}F(f=o).forEach(function(h){var c=f[h];if(W(c))s(h,f[h][0],f[h][1]);else{if(c!=="asap")throw new C.InvalidArgument("Invalid event config");var d=s(h,Tt,function(){for(var p=arguments.length,y=new Array(p);p--;)y[p]=arguments[p];d.subscribers.forEach(function(_){es(function(){_.apply(null,y)})})})}})}}function yt(t,e){return it(e).from({prototype:t}),e}function Xe(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Ln(t,e){t.filter=Ye(t.filter,e)}function zn(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Ye(r(),e()):e,t.justLimit=n&&!r}function ln(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new C.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function vi(t,e,n){const r=ln(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Zt(t,e,n,r){const i=t.replayFilter?Ye(t.filter,t.replayFilter()):t.filter;if(t.or){const s={},o=(l,a,f)=>{if(!i||i(a,f,c=>a.stop(c),c=>a.fail(c))){var u=a.primaryKey,h=""+u;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(u)),ie(s,h)||(s[h]=!0,e(l,a,f))}};return Promise.all([t.or._iterate(o,n),yi(vi(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return yi(vi(t,r,n),Ye(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function yi(t,e,n,r){var i=M(r?(s,o,l)=>n(r(s),o,l):n);return t.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();e&&!e(s,l=>o=l,l=>{s.stop(l),o=R},l=>{s.fail(l),o=R})||i(s.value,s,l=>o=l),o()})})}function H(t,e){try{const n=mi(t),r=mi(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,s){const o=i.length,l=s.length,a=o<l?o:l;for(let f=0;f<a;++f)if(i[f]!==s[f])return i[f]<s[f]?-1:1;return o===l?0:o<l?-1:1}(_i(t),_i(e));case"Array":return function(i,s){const o=i.length,l=s.length,a=o<l?o:l;for(let f=0;f<a;++f){const u=H(i[f],s[f]);if(u!==0)return u}return o===l?0:o<l?-1:1}(t,e)}}catch{}return NaN}function mi(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=or(t);return n==="ArrayBuffer"?"binary":n}function _i(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Wa{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,q.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,q.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Ye(n.algorithm,e)}_iterate(e,n){return Zt(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&X(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>Zt(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(Xe(r,!0))return i.count({trans:n,query:{index:ln(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return Zt(r,()=>(++s,!1),n,i).then(()=>s)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],s=r.length-1;function o(f,u){return u?o(f[r[u]],u-1):f[i]}var l=this._ctx.dir==="next"?1:-1;function a(f,u){var h=o(f,s),c=o(u,s);return h<c?-l:h>c?l:0}return this.toArray(function(f){return f.sort(a)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&Xe(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=ln(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return Zt(r,s=>i.push(s),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Xe(n)?zn(n,()=>{var r=e;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):zn(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),zn(this._ctx,()=>{var n=e;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(e,n){return Ln(this._ctx,function(r,i,s){return!e(r.value)||(i(s),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return Ln(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=Ye(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Xe(n,!0)&&n.limit>0)return this._read(i=>{var s=ln(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Ln(this._ctx,function(i){var s=i.primaryKey.toString(),o=ie(r,s);return r[s]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var s=F(e),o=s.length;i=function(y){for(var _=!1,v=0;v<o;++v){var m=s[v],b=e[m];Oe(y,m)!==b&&(ae(y,m,b),_=!0)}return _}}const l=n.table.core,{outbound:a,extractKey:f}=l.schema.primaryKey,u=this.db._options.modifyChunkSize||200,h=[];let c=0;const d=[],p=(y,_)=>{const{failures:v,numFailures:m}=_;c+=y-m;for(let b of F(v))h.push(v[b])};return this.clone().primaryKeys().then(y=>{const _=v=>{const m=Math.min(u,y.length-v);return l.getMany({trans:r,keys:y.slice(v,v+m),cache:"immutable"}).then(b=>{const g=[],x=[],k=a?[]:null,w=[];for(let E=0;E<m;++E){const T=b[E],A={value:Ut(T),primKey:y[v+E]};i.call(A,A.value,A)!==!1&&(A.value==null?w.push(y[v+E]):a||H(f(T),f(A.value))===0?(x.push(A.value),a&&k.push(y[v+E])):(w.push(y[v+E]),g.push(A.value)))}const O=Xe(n)&&n.limit===1/0&&(typeof e!="function"||e===Un)&&{index:n.index,range:n.range};return Promise.resolve(g.length>0&&l.mutate({trans:r,type:"add",values:g}).then(E=>{for(let T in E.failures)w.splice(parseInt(T),1);p(g.length,E)})).then(()=>(x.length>0||O&&typeof e=="object")&&l.mutate({trans:r,type:"put",keys:k,values:x,criteria:O,changeSpec:typeof e!="function"&&e}).then(E=>p(x.length,E))).then(()=>(w.length>0||O&&e===Un)&&l.mutate({trans:r,type:"delete",keys:w,criteria:O}).then(E=>p(w.length,E))).then(()=>y.length>v+m&&_(v+u))})};return _(0).then(()=>{if(h.length>0)throw new wn("Error modifying one or more objects",h,c,d);return y.length})})})}delete(){var e=this._ctx,n=e.range;return Xe(e)&&(e.isPrimKey&&!Va||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,s=n;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:l,lastResult:a,results:f,numFailures:u})=>{if(u)throw new wn("Could not delete some values",Object.keys(l).map(h=>l[h]),o-u);return o-u}))}):this.modify(Un)}}const Un=(t,e)=>e.value=null;function Ga(t,e){return t<e?-1:t===e?0:1}function Ha(t,e){return t>e?-1:t===e?0:1}function ee(t,e,n){var r=t instanceof xs?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Je(t){return new t.Collection(t,()=>ws("")).limit(0)}function Qa(t,e,n,r,i,s){for(var o=Math.min(t.length,r.length),l=-1,a=0;a<o;++a){var f=e[a];if(f!==r[a])return i(t[a],n[a])<0?t.substr(0,a)+n[a]+n.substr(a+1):i(t[a],r[a])<0?t.substr(0,a)+r[a]+n.substr(a+1):l>=0?t.substr(0,l)+e[l]+n.substr(l+1):null;i(t[a],f)<0&&(l=a)}return o<r.length&&s==="next"?t+n.substr(t.length):o<t.length&&s==="prev"?t.substr(0,n.length):l<0?null:t.substr(0,l)+r[l]+n.substr(l+1)}function en(t,e,n,r){var i,s,o,l,a,f,u,h=n.length;if(!n.every(y=>typeof y=="string"))return ee(t,_s);function c(y){i=function(v){return v==="next"?m=>m.toUpperCase():m=>m.toLowerCase()}(y),s=function(v){return v==="next"?m=>m.toLowerCase():m=>m.toUpperCase()}(y),o=y==="next"?Ga:Ha;var _=n.map(function(v){return{lower:s(v),upper:i(v)}}).sort(function(v,m){return o(v.lower,m.lower)});l=_.map(function(v){return v.upper}),a=_.map(function(v){return v.lower}),f=y,u=y==="next"?"":r}c("next");var d=new t.Collection(t,()=>Ce(l[0],a[h-1]+r));d._ondirectionchange=function(y){c(y)};var p=0;return d._addAlgorithm(function(y,_,v){var m=y.key;if(typeof m!="string")return!1;var b=s(m);if(e(b,a,p))return!0;for(var g=null,x=p;x<h;++x){var k=Qa(m,b,l[x],a[x],o,f);k===null&&g===null?p=x+1:(g===null||o(g,k)>0)&&(g=k)}return _(g!==null?function(){y.continue(g+u)}:v),!1}),d}function Ce(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function ws(t){return{type:1,lower:t,upper:t}}class xs{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?Je(this):new this.Collection(this,()=>Ce(e,n,!r,!i))}catch{return ee(this,we)}}equals(e){return e==null?ee(this,we):new this.Collection(this,()=>ws(e))}above(e){return e==null?ee(this,we):new this.Collection(this,()=>Ce(e,void 0,!0))}aboveOrEqual(e){return e==null?ee(this,we):new this.Collection(this,()=>Ce(e,void 0,!1))}below(e){return e==null?ee(this,we):new this.Collection(this,()=>Ce(void 0,e,!1,!0))}belowOrEqual(e){return e==null?ee(this,we):new this.Collection(this,()=>Ce(void 0,e))}startsWith(e){return typeof e!="string"?ee(this,_s):this.between(e,e+qe,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):en(this,(n,r)=>n.indexOf(r[0])===0,[e],qe)}equalsIgnoreCase(e){return en(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=ke.apply(Ze,arguments);return e.length===0?Je(this):en(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=ke.apply(Ze,arguments);return e.length===0?Je(this):en(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,qe)}anyOf(){const e=ke.apply(Ze,arguments);let n=this._cmp;try{e.sort(n)}catch{return ee(this,we)}if(e.length===0)return Je(this);const r=new this.Collection(this,()=>Ce(e[0],e[e.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((s,o,l)=>{const a=s.key;for(;n(a,e[i])>0;)if(++i,i===e.length)return o(l),!1;return n(a,e[i])===0||(o(()=>{s.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[_r,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=ke.apply(Ze,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ee(this,we)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[_r,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,l=this._max;if(e.length===0)return Je(this);if(!e.every(m=>m[0]!==void 0&&m[1]!==void 0&&i(m[0],m[1])<=0))return ee(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",C.InvalidArgument);const a=!n||n.includeLowers!==!1,f=n&&n.includeUppers===!0;let u,h=i;function c(m,b){return h(m[0],b[0])}try{u=e.reduce(function(m,b){let g=0,x=m.length;for(;g<x;++g){const k=m[g];if(r(b[0],k[1])<0&&r(b[1],k[0])>0){k[0]=o(k[0],b[0]),k[1]=l(k[1],b[1]);break}}return g===x&&m.push(b),m},[]),u.sort(c)}catch{return ee(this,we)}let d=0;const p=f?m=>i(m,u[d][1])>0:m=>i(m,u[d][1])>=0,y=a?m=>s(m,u[d][0])>0:m=>s(m,u[d][0])>=0;let _=p;const v=new this.Collection(this,()=>Ce(u[0][0],u[u.length-1][1],!a,!f));return v._ondirectionchange=m=>{m==="next"?(_=p,h=i):(_=y,h=s),u.sort(c)},v._addAlgorithm((m,b,g)=>{for(var x=m.key;_(x);)if(++d,d===u.length)return b(g),!1;return!!function(k){return!p(k)&&!y(k)}(x)||(this._cmp(x,u[d][1])===0||this._cmp(x,u[d][0])===0||b(()=>{h===i?m.continue(u[d][0]):m.continue(u[d][1])}),!1)}),v}startsWithAnyOf(){const e=ke.apply(Ze,arguments);return e.every(n=>typeof n=="string")?e.length===0?Je(this):this.inAnyRange(e.map(n=>[n,n+qe])):ee(this,"startsWithAnyOf() only works with strings")}}function he(t){return M(function(e){return Rt(e),t(e.target.error),!1})}function Rt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const jt="storagemutated",Ke="x-storagemutated-1",Me=St(null,jt);class Xa{_lock(){return _t(!S.global),++this._reculock,this._reculock!==1||S.global||(S.lockOwnerFor=this),this}_unlock(){if(_t(!S.global),--this._reculock==0)for(S.global||(S.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{pt(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&S.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(_t(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new C.DatabaseClosed(r);case"MissingAPIError":throw new C.MissingAPI(r.message,r);default:throw new C.OpenFailed(r)}if(!this.active)throw new C.TransactionInactive;return _t(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=M(i=>{Rt(i),this._reject(e.error)}),e.onabort=M(i=>{Rt(i),this.active&&this._reject(new C.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=M(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Me.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return q(new C.ReadOnly("Transaction is readonly"));if(!this.active)return q(new C.TransactionInactive);if(this._locked())return new P((s,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(s,o)},S])});if(r)return je(()=>{var s=new P((o,l)=>{this._lock();const a=n(o,l,this);a&&a.then&&a.then(o,l)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new P((s,o)=>{var l=n(s,o,this);l&&l.then&&l.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=P.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new P((o,l)=>{r.then(a=>n._waitingQueue.push(M(o.bind(null,a))),a=>n._waitingQueue.push(M(l.bind(null,a)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new C.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(ie(n,e))return n[e];const r=this.schema[e];if(!r)throw new C.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function gr(t,e,n,r,i,s,o){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+ks(e)}}function ks(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Es(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:ts(n,r=>[r.name,r])}}let Bt=t=>{try{return t.only([[]]),Bt=()=>[[]],[[]]}catch{return Bt=()=>qe,qe}};function br(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Oe(r,e)}(t):e=>Oe(e,t)}function gi(t){return[].slice.call(t)}let Ja=0;function Ct(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Za(t,e,n){function r(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:f,upper:u,lowerOpen:h,upperOpen:c}=a;return f===void 0?u===void 0?null:e.upperBound(u,!!c):u===void 0?e.lowerBound(f,!!h):e.bound(f,u,!!h,!!c)}const{schema:i,hasGetAll:s}=function(a,f){const u=gi(a.objectStoreNames);return{schema:{name:a.name,tables:u.map(h=>f.objectStore(h)).map(h=>{const{keyPath:c,autoIncrement:d}=h,p=W(c),y=c==null,_={},v={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y,compound:p,keyPath:c,autoIncrement:d,unique:!0,extractKey:br(c)},indexes:gi(h.indexNames).map(m=>h.index(m)).map(m=>{const{name:b,unique:g,multiEntry:x,keyPath:k}=m,w={name:b,compound:W(k),keyPath:k,unique:g,multiEntry:x,extractKey:br(k)};return _[Ct(k)]=w,w}),getIndexByKeyPath:m=>_[Ct(m)]};return _[":id"]=v.primaryKey,c!=null&&(_[Ct(c)]=v.primaryKey),v})},hasGetAll:u.length>0&&"getAll"in f.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=i.tables.map(a=>function(f){const u=f.name;return{name:u,schema:f,mutate:function({trans:h,type:c,keys:d,values:p,range:y}){return new Promise((_,v)=>{_=M(_);const m=h.objectStore(u),b=m.keyPath==null,g=c==="put"||c==="add";if(!g&&c!=="delete"&&c!=="deleteRange")throw new Error("Invalid operation type: "+c);const{length:x}=d||p||{length:1};if(d&&p&&d.length!==p.length)throw new Error("Given keys array must have same length as given values array.");if(x===0)return _({numFailures:0,failures:{},results:[],lastResult:void 0});let k;const w=[],O=[];let E=0;const T=N=>{++E,Rt(N)};if(c==="deleteRange"){if(y.type===4)return _({numFailures:E,failures:O,results:[],lastResult:void 0});y.type===3?w.push(k=m.clear()):w.push(k=m.delete(r(y)))}else{const[N,$]=g?b?[p,d]:[p,null]:[d,null];if(g)for(let j=0;j<x;++j)w.push(k=$&&$[j]!==void 0?m[c](N[j],$[j]):m[c](N[j])),k.onerror=T;else for(let j=0;j<x;++j)w.push(k=m[c](N[j])),k.onerror=T}const A=N=>{const $=N.target.result;w.forEach((j,ge)=>j.error!=null&&(O[ge]=j.error)),_({numFailures:E,failures:O,results:c==="delete"?d:w.map(j=>j.result),lastResult:$})};k.onerror=N=>{T(N),A(N)},k.onsuccess=A})},getMany:({trans:h,keys:c})=>new Promise((d,p)=>{d=M(d);const y=h.objectStore(u),_=c.length,v=new Array(_);let m,b=0,g=0;const x=w=>{const O=w.target;v[O._pos]=O.result,++g===b&&d(v)},k=he(p);for(let w=0;w<_;++w)c[w]!=null&&(m=y.get(c[w]),m._pos=w,m.onsuccess=x,m.onerror=k,++b);b===0&&d(v)}),get:({trans:h,key:c})=>new Promise((d,p)=>{d=M(d);const y=h.objectStore(u).get(c);y.onsuccess=_=>d(_.target.result),y.onerror=he(p)}),query:function(h){return c=>new Promise((d,p)=>{d=M(d);const{trans:y,values:_,limit:v,query:m}=c,b=v===1/0?void 0:v,{index:g,range:x}=m,k=y.objectStore(u),w=g.isPrimaryKey?k:k.index(g.name),O=r(x);if(v===0)return d({result:[]});if(h){const E=_?w.getAll(O,b):w.getAllKeys(O,b);E.onsuccess=T=>d({result:T.target.result}),E.onerror=he(p)}else{let E=0;const T=_||!("openKeyCursor"in w)?w.openCursor(O):w.openKeyCursor(O),A=[];T.onsuccess=N=>{const $=T.result;return $?(A.push(_?$.value:$.primaryKey),++E===v?d({result:A}):void $.continue()):d({result:A})},T.onerror=he(p)}})}(s),openCursor:function({trans:h,values:c,query:d,reverse:p,unique:y}){return new Promise((_,v)=>{_=M(_);const{index:m,range:b}=d,g=h.objectStore(u),x=m.isPrimaryKey?g:g.index(m.name),k=p?y?"prevunique":"prev":y?"nextunique":"next",w=c||!("openKeyCursor"in x)?x.openCursor(r(b),k):x.openKeyCursor(r(b),k);w.onerror=he(v),w.onsuccess=M(O=>{const E=w.result;if(!E)return void _(null);E.___id=++Ja,E.done=!1;const T=E.continue.bind(E);let A=E.continuePrimaryKey;A&&(A=A.bind(E));const N=E.advance.bind(E),$=()=>{throw new Error("Cursor not stopped")};E.trans=h,E.stop=E.continue=E.continuePrimaryKey=E.advance=()=>{throw new Error("Cursor not started")},E.fail=M(v),E.next=function(){let j=1;return this.start(()=>j--?this.continue():this.stop()).then(()=>this)},E.start=j=>{const ge=new Promise((L,fe)=>{L=M(L),w.onerror=he(fe),E.fail=fe,E.stop=vt=>{E.stop=E.continue=E.continuePrimaryKey=E.advance=$,L(vt)}}),be=()=>{if(w.result)try{j()}catch(L){E.fail(L)}else E.done=!0,E.start=()=>{throw new Error("Cursor behind last entry")},E.stop()};return w.onsuccess=M(L=>{w.onsuccess=be,be()}),E.continue=T,E.continuePrimaryKey=A,E.advance=N,be(),ge},_(E)},v)})},count({query:h,trans:c}){const{index:d,range:p}=h;return new Promise((y,_)=>{const v=c.objectStore(u),m=d.isPrimaryKey?v:v.index(d.name),b=r(p),g=b?m.count(b):m.count();g.onsuccess=M(x=>y(x.target.result)),g.onerror=he(_)})}}}(a)),l={};return o.forEach(a=>l[a.name]=a),{stack:"dbcore",transaction:t.transaction.bind(t),table(a){if(!l[a])throw new Error(`Table '${a}' not found`);return l[a]},MIN_KEY:-1/0,MAX_KEY:Bt(e),schema:i}}function wr({_novip:t},e){const n=e.db,r=function(i,s,{IDBKeyRange:o,indexedDB:l},a){return{dbcore:function(u,h){return h.reduce((c,{create:d})=>({...c,...d(c)}),u)}(Za(s,o,a),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const s=i.name;t.core.schema.tables.some(o=>o.name===s)&&(i.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=i.core))})}function On({_novip:t},e,n,r){n.forEach(i=>{const s=r[i];e.forEach(o=>{const l=Lr(o,i);(!l||"value"in l&&l.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?Pe(o,i,{get(){return this.table(i)},set(a){Ji(this,i,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new t.Table(i,s))})})}function xr({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function eu(t,e){return t._cfg.version-e._cfg.version}function tu(t,e,n,r){const i=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),l=S.transless||S;je(()=>{S.trans=s,S.transless=l,e===0?(F(i).forEach(a=>{Vn(n,a,i[a].primKey,i[a].indexes)}),wr(t,n),P.follow(()=>t.on.populate.fire(s)).catch(o)):function({_novip:a},f,u,h){const c=[],d=a._versions;let p=a._dbSchema=Er(a,a.idbdb,h),y=!1;const _=d.filter(m=>m._cfg.version>=f);function v(){return c.length?P.resolve(c.shift()(u.idbtrans)).then(v):P.resolve()}return _.forEach(m=>{c.push(()=>{const b=p,g=m._cfg.dbschema;Pr(a,b,h),Pr(a,g,h),p=a._dbSchema=g;const x=Ps(b,g);x.add.forEach(w=>{Vn(h,w[0],w[1].primKey,w[1].indexes)}),x.change.forEach(w=>{if(w.recreate)throw new C.Upgrade("Not yet support for changing primary key");{const O=h.objectStore(w.name);w.add.forEach(E=>kr(O,E)),w.change.forEach(E=>{O.deleteIndex(E.name),kr(O,E)}),w.del.forEach(E=>O.deleteIndex(E))}});const k=m._cfg.contentUpgrade;if(k&&m._cfg.version>f){wr(a,h),u._memoizedTables={},y=!0;let w=ns(g);x.del.forEach(A=>{w[A]=b[A]}),xr(a,[a.Transaction.prototype]),On(a,[a.Transaction.prototype],F(w),w),u.schema=w;const O=zr(k);let E;O&&dt();const T=P.follow(()=>{if(E=k(u),E&&O){var A=Se.bind(null,null);E.then(A,A)}});return E&&typeof E.then=="function"?P.resolve(E):T.then(()=>E)}}),c.push(b=>{(!y||!Ua)&&function(g,x){[].slice.call(x.db.objectStoreNames).forEach(k=>g[k]==null&&x.db.deleteObjectStore(k))}(m._cfg.dbschema,b),xr(a,[a.Transaction.prototype]),On(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),u.schema=a._dbSchema})}),v().then(()=>{var m,b;b=h,F(m=p).forEach(g=>{b.db.objectStoreNames.contains(g)||Vn(b,g,m[g].primKey,m[g].indexes)})})}(t,e,s,n).catch(o)})}function Ps(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],s=e[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!Bn)o.recreate=!0,n.change.push(o);else{const l=i.idxByName,a=s.idxByName;let f;for(f in l)a[f]||o.del.push(f);for(f in a){const u=l[f],h=a[f];u?u.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,s])}return n}function Vn(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>kr(i,s)),i}function kr(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Er(t,e,n){const r={};return bn(e.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let o=s.keyPath;const l=gr(ks(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),a=[];for(let u=0;u<s.indexNames.length;++u){const h=s.index(s.indexNames[u]);o=h.keyPath;var f=gr(h.name,o,!!h.unique,!!h.multiEntry,!1,o&&typeof o!="string",!1);a.push(f)}r[i]=Es(i,l,a)}),r}function Pr({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=n.objectStore(s);t._hasGetAll="getAll"in o;for(let l=0;l<o.indexNames.length;++l){const a=o.indexNames[l],f=o.index(a).keyPath,u=typeof f=="string"?f:"["+bn(f).join("+")+"]";if(e[s]){const h=e[s].idxByName[u];h&&(h.name=a,delete e[s].idxByName[u],e[s].idxByName[a]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&B.WorkerGlobalScope&&B instanceof B.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class nu{_parseStoresSpec(e,n){F(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((o,l)=>{const a=(o=o.trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return gr(a,f||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),W(f),l===0)}),s=i.shift();if(s.multi)throw new C.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new C.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new C.Schema("Index must have a name and cannot be an empty string")}),n[r]=Es(r,s,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?X(this._cfg.storesSource,e):e;const r=n._versions,i={};let s={};return r.forEach(o=>{X(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,xr(n,[n._allTables,n,n.Transaction.prototype]),On(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],F(s),s),n._storeNames=F(s),this}upgrade(e){return this._cfg.contentUpgrade=Yr(this._cfg.contentUpgrade||R,e),this}}function Qr(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new ze(Mn,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Xr(t){return t&&typeof t.databases=="function"}function Or(t){return je(function(){return S.letThrough=!0,t()})}function ru(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function iu(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?q(e.dbOpenError):t);_e&&(e.openCanceller._stackHolder=Ge()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new C.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,l=!1;const a=()=>new P((f,u)=>{if(i(),!n)throw new C.MissingAPI;const h=t.name,c=e.autoSchema?n.open(h):n.open(h,Math.round(10*t.verno));if(!c)throw new C.MissingAPI;c.onerror=he(u),c.onblocked=M(t._fireOnBlocked),c.onupgradeneeded=M(d=>{if(o=c.transaction,e.autoSchema&&!t._options.allowEmptyDB){c.onerror=Rt,o.abort(),c.result.close();const y=n.deleteDatabase(h);y.onsuccess=y.onerror=M(()=>{u(new C.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{o.onerror=he(u);var p=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;l=p<1,t._novip.idbdb=c.result,tu(t,p/10,o,u)}},u),c.onsuccess=M(()=>{o=null;const d=t._novip.idbdb=c.result,p=bn(d.objectStoreNames);if(p.length>0)try{const _=d.transaction((y=p).length===1?y[0]:y,"readonly");e.autoSchema?function({_novip:v},m,b){v.verno=m.version/10;const g=v._dbSchema=Er(0,m,b);v._storeNames=bn(m.objectStoreNames,0),On(v,[v._allTables],F(g),g)}(t,d,_):(Pr(t,t._dbSchema,_),function(v,m){const b=Ps(Er(0,v.idbdb,m),v._dbSchema);return!(b.add.length||b.change.some(g=>g.add.length||g.change.length))}(t,_)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),wr(t,_)}catch{}var y;Ot.push(t),d.onversionchange=M(_=>{e.vcFired=!0,t.on("versionchange").fire(_)}),d.onclose=M(_=>{t.on("close").fire(_)}),l&&function({indexedDB:_,IDBKeyRange:v},m){!Xr(_)&&m!==Mn&&Qr(_,v).put({name:m}).catch(R)}(t._deps,h),f()},u)}).catch(f=>f&&f.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),a()):P.reject(f));return P.race([r,(typeof navigator>"u"?P.resolve():ru()).then(a)]).then(()=>(i(),e.onReadyBeingFired=[],P.resolve(Or(()=>t.on.ready.fire(t.vip))).then(function f(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(Yr,R);return e.onReadyBeingFired=[],P.resolve(Or(()=>u(t.vip))).then(f)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(f=>{e.dbOpenError=f;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),q(f)}).finally(()=>{e.openComplete=!0,s()})}function Sr(t){var e=s=>t.next(s),n=i(e),r=i(s=>t.throw(s));function i(s){return o=>{var l=s(o),a=l.value;return l.done?a:a&&typeof a.then=="function"?a.then(n,r):W(a)?Promise.all(a).then(n,r):n(a)}}return i(e)()}function su(t,e,n){var r=arguments.length;if(r<2)throw new C.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,rs(i),n]}function Os(t,e,n,r,i){return P.resolve().then(()=>{const s=S.transless||S,o=t._createTransaction(e,n,t._dbSchema,r),l={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(h){return h.name===Vr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Os(t,e,n,null,i))):q(h)}const a=zr(i);let f;a&&dt();const u=P.follow(()=>{if(f=i.call(o,o),f)if(a){var h=Se.bind(null,null);f.then(h,h)}else typeof f.next=="function"&&typeof f.throw=="function"&&(f=Sr(f))},l);return(f&&typeof f.then=="function"?P.resolve(f).then(h=>o.active?h:q(new C.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>f)).then(h=>(r&&o._resolve(),o._completion.then(()=>h))).catch(h=>(o._reject(h),q(h)))})}function tn(t,e,n){const r=W(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const ou={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},s=[];function o(u,h,c){const d=Ct(u),p=i[d]=i[d]||[],y=u==null?0:typeof u=="string"?1:u.length,_=h>0,v={...c,isVirtual:_,keyTail:h,keyLength:y,extractKey:br(u),unique:!_&&c.unique};return p.push(v),v.isPrimaryKey||s.push(v),y>1&&o(y===2?u[0]:u.slice(0,y-1),h+1,c),p.sort((m,b)=>m.keyTail-b.keyTail),v}const l=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[l];for(const u of r.indexes)o(u.keyPath,0,u);function a(u){const h=u.query.index;return h.isVirtual?{...u,query:{index:h,range:(c=u.query.range,d=h.keyTail,{type:c.type===1?2:c.type,lower:tn(c.lower,c.lowerOpen?t.MAX_KEY:t.MIN_KEY,d),lowerOpen:!0,upper:tn(c.upper,c.upperOpen?t.MIN_KEY:t.MAX_KEY,d),upperOpen:!0})}}:u;var c,d}return{...n,schema:{...r,primaryKey:l,indexes:s,getIndexByKeyPath:function(u){const h=i[Ct(u)];return h&&h[0]}},count:u=>n.count(a(u)),query:u=>n.query(a(u)),openCursor(u){const{keyTail:h,isVirtual:c,keyLength:d}=u.query.index;return c?n.openCursor(a(u)).then(p=>p&&function(y){return Object.create(y,{continue:{value:function(v){v!=null?y.continue(tn(v,u.reverse?t.MAX_KEY:t.MIN_KEY,h)):u.unique?y.continue(y.key.slice(0,d).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,h)):y.continue()}},continuePrimaryKey:{value(v,m){y.continuePrimaryKey(tn(v,t.MAX_KEY,h),m)}},primaryKey:{get:()=>y.primaryKey},key:{get(){const v=y.key;return d===1?v[0]:v.slice(0,d)}},value:{get:()=>y.value}})}(p)):n.openCursor(u)}}}}}};function Jr(t,e,n,r){return n=n||{},r=r||"",F(t).forEach(i=>{if(ie(e,i)){var s=t[i],o=e[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const l=or(s);l!==or(o)?n[r+i]=e[i]:l==="Object"?Jr(s,o,n,r+i+"."):s!==o&&(n[r+i]=e[i])}else s!==o&&(n[r+i]=e[i])}else n[r+i]=void 0}),F(e).forEach(i=>{ie(t,i)||(n[r+i]=e[i])}),n}const au={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(s){const o=S.trans,{deleting:l,creating:a,updating:f}=o.table(e).hook;switch(s.type){case"add":if(a.fire===R)break;return o._promise("readwrite",()=>u(s),!0);case"put":if(a.fire===R&&f.fire===R)break;return o._promise("readwrite",()=>u(s),!0);case"delete":if(l.fire===R)break;return o._promise("readwrite",()=>u(s),!0);case"deleteRange":if(l.fire===R)break;return o._promise("readwrite",()=>function(c){return h(c.trans,c.range,1e4)}(s),!0)}return n.mutate(s);function u(c){const d=S.trans,p=c.keys||function(y,_){return _.type==="delete"?_.keys:_.keys||_.values.map(y.extractKey)}(r,c);if(!p)throw new Error("Keys missing");return(c=c.type==="add"||c.type==="put"?{...c,keys:p}:{...c}).type!=="delete"&&(c.values=[...c.values]),c.keys&&(c.keys=[...c.keys]),function(y,_,v){return _.type==="add"?Promise.resolve([]):y.getMany({trans:_.trans,keys:v,cache:"immutable"})}(n,c,p).then(y=>{const _=p.map((v,m)=>{const b=y[m],g={onerror:null,onsuccess:null};if(c.type==="delete")l.fire.call(g,v,b,d);else if(c.type==="add"||b===void 0){const x=a.fire.call(g,v,c.values[m],d);v==null&&x!=null&&(v=x,c.keys[m]=v,r.outbound||ae(c.values[m],r.keyPath,v))}else{const x=Jr(b,c.values[m]),k=f.fire.call(g,x,v,b,d);if(k){const w=c.values[m];Object.keys(k).forEach(O=>{ie(w,O)?w[O]=k[O]:ae(w,O,k[O])})}}return g});return n.mutate(c).then(({failures:v,results:m,numFailures:b,lastResult:g})=>{for(let x=0;x<p.length;++x){const k=m?m[x]:p[x],w=_[x];k==null?w.onerror&&w.onerror(v[x]):w.onsuccess&&w.onsuccess(c.type==="put"&&y[x]?c.values[x]:k)}return{failures:v,results:m,numFailures:b,lastResult:g}}).catch(v=>(_.forEach(m=>m.onerror&&m.onerror(v)),Promise.reject(v)))})}function h(c,d,p){return n.query({trans:c,values:!1,query:{index:r,range:d},limit:p}).then(({result:y})=>u({type:"delete",keys:y,trans:c}).then(_=>_.numFailures>0?Promise.reject(_.failures[0]):y.length<p?{failures:[],numFailures:0,lastResult:void 0}:h(c,{...d,lower:y[y.length-1],lowerOpen:!0},p)))}}}}})};function Ss(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,s=0;i<e.keys.length&&s<t.length;++i)H(e.keys[i],t[s])===0&&(r.push(n?Ut(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch{return null}}const uu={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=Ss(r.keys,r.trans._cache,r.cache==="clone");return i?P.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Ut(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Zr(t){return!("from"in t)}const xe=function(t,e){if(!this){const n=new xe;return t&&"d"in t&&X(n,t),n}X(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Mt(t,e,n){const r=H(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Zr(t))return X(t,{from:e,to:n,d:1});const i=t.l,s=t.r;if(H(n,t.from)<0)return i?Mt(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},bi(t);if(H(e,t.to)>0)return s?Mt(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},bi(t);H(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),H(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;i&&!t.l&&Sn(t,i),s&&o&&Sn(t,s)}function Sn(t,e){Zr(e)||function n(r,{from:i,to:s,l:o,r:l}){Mt(r,i,s),o&&n(r,o),l&&n(r,l)}(t,e)}function lu(t,e){const n=Cr(e);let r=n.next();if(r.done)return!1;let i=r.value;const s=Cr(t);let o=s.next(i.from),l=o.value;for(;!r.done&&!o.done;){if(H(l.from,i.to)<=0&&H(l.to,i.from)>=0)return!0;H(i.from,l.from)<0?i=(r=n.next(l.from)).value:l=(o=s.next(i.from)).value}return!1}function Cr(t){let e=Zr(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&H(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||H(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function bi(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...t},l=t[i];t.from=l.from,t.to=l.to,t[i]=l[i],o[i]=l[s],t[s]=o,o.d=wi(o)}t.d=wi(t)}function wi({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}ut(xe.prototype,{add(t){return Sn(this,t),this},addKey(t){return Mt(this,t,t),this},addKeys(t){return t.forEach(e=>Mt(this,e,e)),this},[ar](){return Cr(this)}});const cu={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new xe(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:l,outbound:a}=o,f={...i,mutate:c=>{const d=c.trans,p=d.mutatedParts||(d.mutatedParts={}),y=k=>{const w=`idb://${e}/${r}/${k}`;return p[w]||(p[w]=new xe)},_=y(""),v=y(":dels"),{type:m}=c;let[b,g]=c.type==="deleteRange"?[c.range]:c.type==="delete"?[c.keys]:c.values.length<50?[[],c.values]:[];const x=c.trans._cache;return i.mutate(c).then(k=>{if(W(b)){m!=="delete"&&(b=k.results),_.addKeys(b);const w=Ss(b,x);w||m==="add"||v.addKeys(b),(w||g)&&function(O,E,T,A){function N($){const j=O($.name||"");function ge(L){return L!=null?$.extractKey(L):null}const be=L=>$.multiEntry&&W(L)?L.forEach(fe=>j.addKey(fe)):j.addKey(L);(T||A).forEach((L,fe)=>{const vt=T&&ge(T[fe]),Nn=A&&ge(A[fe]);H(vt,Nn)!==0&&(vt!=null&&be(vt),Nn!=null&&be(Nn))})}E.indexes.forEach(N)}(y,s,w,g)}else if(b){const w={from:b.lower,to:b.upper};v.add(w),_.add(w)}else _.add(n),v.add(n),s.indexes.forEach(w=>y(w.name).add(n));return k})}},u=({query:{index:c,range:d}})=>{var p,y;return[c,new xe((p=d.lower)!==null&&p!==void 0?p:t.MIN_KEY,(y=d.upper)!==null&&y!==void 0?y:t.MAX_KEY)]},h={get:c=>[o,new xe(c.key)],getMany:c=>[o,new xe().addKeys(c.keys)],count:u,query:u,openCursor:u};return F(h).forEach(c=>{f[c]=function(d){const{subscr:p}=S;if(p){const y=g=>{const x=`idb://${e}/${r}/${g}`;return p[x]||(p[x]=new xe)},_=y(""),v=y(":dels"),[m,b]=h[c](d);if(y(m.name||"").add(b),!m.isPrimaryKey){if(c!=="count"){const g=c==="query"&&a&&d.values&&i.query({...d,values:!1});return i[c].apply(this,arguments).then(x=>{if(c==="query"){if(a&&d.values)return g.then(({result:w})=>(_.addKeys(w),x));const k=d.values?x.result.map(l):x.result;d.values?_.addKeys(k):v.addKeys(k)}else if(c==="openCursor"){const k=x,w=d.values;return k&&Object.create(k,{key:{get:()=>(v.addKey(k.primaryKey),k.key)},primaryKey:{get(){const O=k.primaryKey;return v.addKey(O),O}},value:{get:()=>(w&&_.addKey(k.primaryKey),k.value)}})}return x})}v.add(n)}}return i[c].apply(this,arguments)}}),f}}}};class ze{constructor(e,n){this._middlewares={},this.verno=0;const r=ze.dependencies;this._options=n={addons:ze.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:R,dbReadyPromise:null,cancelOpen:R,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new P(l=>{s.dbReadyResolve=l}),s.openCanceller=new P((l,a)=>{s.cancelOpen=a}),this._state=s,this.name=e,this.on=St(this,"populate","blocked","versionchange","close",{ready:[Yr,R]}),this.on.ready.subscribe=Zi(this.on.ready.subscribe,l=>(a,f)=>{ze.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||P.resolve().then(a),f&&l(a);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(a),f&&l(a);else{l(a);const h=this;f||l(function c(){h.on.ready.unsubscribe(a),h.on.ready.unsubscribe(c)})}})}),this.Collection=(o=this,yt(Wa.prototype,function(l,a){this.db=o;let f=bs,u=null;if(a)try{f=a()}catch(p){u=p}const h=l._ctx,c=h.table,d=c.hook.reading.fire;this._ctx={table:c,index:h.index,isPrimKey:!h.index||c.schema.primKey.keyPath&&h.index===c.schema.primKey.name,range:f,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:h.or,valueMapper:d!==Tt?d:null}})),this.Table=function(l){return yt(Ya.prototype,function(a,f,u){this.db=l,this._tx=u,this.name=a,this.schema=f,this.hook=l._allTables[a]?l._allTables[a].hook:St(null,{creating:[Ra,R],reading:[Da,Tt],updating:[Ba,R],deleting:[ja,R]})})}(this),this.Transaction=function(l){return yt(Xa.prototype,function(a,f,u,h,c){this.db=l,this.mode=a,this.storeNames=f,this.schema=u,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=St(this,"complete","error","abort"),this.parent=c||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new P((d,p)=>{this._resolve=d,this._reject=p}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},d=>{var p=this.active;return this.active=!1,this.on.error.fire(d),this.parent?this.parent._reject(d):p&&this.idbtrans&&this.idbtrans.abort(),q(d)})})}(this),this.Version=function(l){return yt(nu.prototype,function(a){this.db=l,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return yt(xs.prototype,function(a,f,u){this.db=l,this._ctx={table:a,index:f===":id"?null:f,or:u};const h=l._deps.indexedDB;if(!h)throw new C.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(c,d)=>h.cmp(d,c),this._max=(c,d)=>h.cmp(c,d)>0?c:d,this._min=(c,d)=>h.cmp(c,d)<0?c:d,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=Bt(n.IDBKeyRange),this._createTransaction=(l,a,f,u)=>new this.Transaction(l,a,f,this._options.chromeTransactionDurability,u),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Ot.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(l))},this.use(ou),this.use(au),this.use(cu),this.use(uu),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(l=>l(this))}version(e){if(isNaN(e)||e<.1)throw new C.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new C.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(eu),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||S.letThrough||this._vip)?e():new P((n,r)=>{if(this._state.openComplete)return r(new C.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new C.DatabaseClosed);this.open().catch(R)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:r??10,name:i}),s.sort((o,l)=>o.level-l.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return iu(this)}_close(){const e=this._state,n=Ot.indexOf(this);if(n>=0&&Ot.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new P(r=>{e.dbReadyResolve=r}),e.openCanceller=new P((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new C.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new P((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=M(()=>{(function({indexedDB:l,IDBKeyRange:a},f){!Xr(l)&&f!==Mn&&Qr(l,a).delete(f).catch(R)})(this._deps,this.name),r()}),o.onerror=he(i),o.onblocked=this._fireOnBlocked};if(e)throw new C.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return F(this._allTables).map(e=>this._allTables[e])}transaction(){const e=su.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=S.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const s=e.indexOf("?")!==-1;let o,l;e=e.replace("!","").replace("?","");try{if(l=n.map(f=>{var u=f instanceof this.Table?f.name:f;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===qn)o=qn;else{if(e!="rw"&&e!=$n)throw new C.InvalidArgument("Invalid transaction mode: "+e);o=$n}if(i){if(i.mode===qn&&o===$n){if(!s)throw new C.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&l.forEach(f=>{if(i&&i.storeNames.indexOf(f)===-1){if(!s)throw new C.SubTransaction("Table "+f+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(f){return i?i._promise(null,(u,h)=>{h(f)}):q(f)}const a=Os.bind(null,this,o,l,i,r);return i?i._promise(o,a,"lock"):S.trans?pt(S.transless,()=>this._whenReady(a)):this._whenReady(a)}table(e){if(!ie(this._allTables,e))throw new C.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const fu=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class hu{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[fu](){return this}}function Cs(t,e){return F(e).forEach(n=>{Sn(t[n]||(t[n]=new xe),e[n])}),t}function As(t){let e,n=!1;const r=new hu(i=>{const s=zr(t);let o=!1,l={},a={};const f={get closed(){return o},unsubscribe:()=>{o=!0,Me.storagemutated.unsubscribe(d)}};i.start&&i.start(f);let u=!1,h=!1;function c(){return F(a).some(y=>l[y]&&lu(l[y],a[y]))}const d=y=>{Cs(l,y),c()&&p()},p=()=>{if(u||o)return;l={};const y={},_=function(v){s&&dt();const m=()=>je(t,{subscr:v,trans:null}),b=S.trans?pt(S.transless,m):m();return s&&b.then(Se,Se),b}(y);h||(Me(jt,d),h=!0),u=!0,Promise.resolve(_).then(v=>{n=!0,e=v,u=!1,o||(c()?p():(l={},a=y,i.next&&i.next(v)))},v=>{u=!1,n=!1,i.error&&i.error(v),f.unsubscribe()})};return p(),f});return r.hasValue=()=>n,r.getValue=()=>e,r}let Ar;try{Ar={indexedDB:B.indexedDB||B.mozIndexedDB||B.webkitIndexedDB||B.msIndexedDB,IDBKeyRange:B.IDBKeyRange||B.webkitIDBKeyRange}}catch{Ar={indexedDB:null,IDBKeyRange:null}}const Fe=ze;function cn(t){let e=Ee;try{Ee=!0,Me.storagemutated.fire(t)}finally{Ee=e}}ut(Fe,{...rn,delete:t=>new Fe(t,{addons:[]}).delete(),exists:t=>new Fe(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Xr(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==Mn)):Qr(e,n).toCollection().primaryKeys()}(Fe.dependencies).then(t)}catch{return q(new C.MissingAPI)}},defineClass:()=>function(t){X(this,t)},ignoreTransaction:t=>S.trans?pt(S.transless,t):t(),vip:Or,async:function(t){return function(){try{var e=Sr(t.apply(this,arguments));return e&&typeof e.then=="function"?e:P.resolve(e)}catch(n){return q(n)}}},spawn:function(t,e,n){try{var r=Sr(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:P.resolve(r)}catch(i){return q(i)}},currentTransaction:{get:()=>S.trans||null},waitFor:function(t,e){const n=P.resolve(typeof t=="function"?Fe.ignoreTransaction(t):t).timeout(e||6e4);return S.trans?S.trans.waitFor(n):n},Promise:P,debug:{get:()=>_e,set:t=>{ss(t,t==="dexie"?()=>!0:gs)}},derive:it,extend:X,props:ut,override:Zi,Events:St,on:Me,liveQuery:As,extendObservabilitySet:Cs,getByKeyPath:Oe,setByKeyPath:ae,delByKeyPath:function(t,e){typeof e=="string"?ae(t,e,void 0):"length"in e&&[].map.call(e,function(n){ae(t,n,void 0)})},shallowClone:ns,deepClone:Ut,getObjectDiff:Jr,cmp:H,asap:es,minKey:_r,addons:[],connections:Ot,errnames:Vr,dependencies:Ar,semVer:pi,version:pi.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Fe.maxKey=Bt(Fe.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Me(jt,t=>{if(!Ee){let e;Bn?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Ke,!0,!0,t)):e=new CustomEvent(Ke,{detail:t}),Ee=!0,dispatchEvent(e),Ee=!1}}),addEventListener(Ke,({detail:t})=>{Ee||cn(t)}));let Ee=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Ke);typeof t.unref=="function"&&t.unref(),Me(jt,e=>{Ee||t.postMessage(e)}),t.onmessage=e=>{e.data&&cn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Me(jt,e=>{try{Ee||(typeof localStorage<"u"&&localStorage.setItem(Ke,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Ke,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Ke){const n=JSON.parse(e.newValue);n&&cn(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Ke&&cn(e.changedParts)})}P.rejectionMapper=function(t,e){if(!t||t instanceof st||t instanceof TypeError||t instanceof SyntaxError||!t.name||!ci[t.name])return t;var n=new ci[t.name](e||t.message,t);return"stack"in t&&Pe(n,"stack",{get:function(){return this.inner.stack}}),n},ss(_e,gs);class du extends ze{constructor(){super("MemoryGame");ei(this,"completedGames");this.version(1).stores({completedGames:"++id, itemCount, moveCount"})}}const Is=new du;var pu=ce('<tr><td colSpan="3" class="muted centered svelte-19w152h">No games played</td></tr>'),vu=ce('<tr><td class="svelte-19w152h"> </td><td class="svelte-19w152h"> </td><td class="svelte-19w152h"> </td></tr>'),yu=ce('<table class="svelte-19w152h"><thead class="svelte-19w152h"><tr><th scope="col" class="svelte-19w152h">Moves</th><th scope="col" class="svelte-19w152h">Games</th><th scope="col" class="svelte-19w152h">Last Played</th></tr></thead><tbody class="svelte-19w152h"><!></tbody></table>');function mu(t,e){ft(e,!0);const n=$r(),r=()=>qr(o,"$data",n),i=(h,c)=>parseInt(h)-parseInt(c),s=h=>{const c={year:"numeric",month:"short",day:"numeric"};return new Date(h).toLocaleDateString(navigator.language,c)};let o=As(()=>Is.completedGames.toArray()),l=jr(()=>xa(r()||[],"moveCount"));var a=yu(),f=ve(V(a)),u=V(f);_n(u,()=>r()&&r().length===0,h=>{var c=pu();Q(h,c)},h=>{var c=tr(),d=yn(c);Qi(d,17,()=>Object.keys(K(l)).sort(i),Hi,(p,y,_)=>{var v=vu(),m=V(v);kt(m,"data-testid",`records-row${_??""}-col0`);var b=V(m),g=ve(m);kt(g,"data-testid",`records-row${_??""}-col1`);var x=V(g),k=ve(g);kt(k,"data-testid",`records-row${_??""}-col2`);var w=V(k);At(()=>xt(w,s(Math.max(...K(l)[K(y)].map(O=>O.timestamp))))),At(()=>{xt(b,K(y)),xt(x,K(l)[K(y)].length)}),Q(p,v)}),Q(h,c)}),Q(t,a),ht()}var _u=ce('<div class="modal-header svelte-lh4ff1"><button class="button modal-close-button svelte-lh4ff1">Close</button></div>'),gu=ce('<div class="records-list svelte-lh4ff1"><p class="text-muted">Your objective is to solve puzzles in the fewest moves possible. Your history is persisted on this device.</p> <!></div>');function bu(t,e){wa(t,{get close(){return e.close},header:i=>{var s=_u(),o=V(s);To(o),o.__click=function(...l){var a;(a=e.close)==null||a.apply(this,l)},Q(i,s)},content:i=>{var s=gu(),o=ve(V(s),2);mu(o,{}),Q(i,s)},$$slots:{header:!0,content:!0}})}jn(["click"]);var wu=ce('<div class="svelte-al6881"> </div>');function xu(t,e){let n=tt(e,"count",3,0);var r=wu(),i=V(r);At(()=>xt(i,`${n()??""} ${(n()===1?"move":"moves")??""}`)),Q(t,r)}var ku=ce('<div class="app-root svelte-11te9r0"><div class="app-container svelte-11te9r0"><!> <div class="footer-bar svelte-11te9r0"><!> <!></div></div></div> <!>',1);function Eu(t,e){ft(e,!0);const n=$r(),r=()=>qr(gn,"$moveCount",n);function i(){const v=Math.random,m=[[4,4]],[b,g]=m[Math.floor(v()*m.length)],x=b*g/2;let k=new Array(x).fill().map((T,A)=>A+1);k.push(...k);const w=Array.from({length:k.length},(T,A)=>{const N=Math.floor(v()*k.length);return{index:A,type:k.splice(N,1)[0],backfaceIsUp:!1}});console.log("new puzzle!");const O=w.map(T=>T.type);for(var E=0;E<g;(E+=1)-1)console.log(O.splice(0,b));return{puzzle:w}}let s=hn(re(i()));const o=async v=>{await Is.completedGames.add({itemCount:K(s).puzzle.length,moveCount:v,timestamp:Date.now()})};function l(){alert(`You won in ${r()} moves!`),o(r()),K(s).puzzle=K(s).puzzle.map(v=>(v.backfaceIsUp=!1,v)),setTimeout(()=>{z(s,re(i())),na(gn,0)},200)}let a=hn(!1);var f=ku(),u=yn(f),h=V(u),c=V(h);fa(c,{get puzzle(){return K(s).puzzle},set puzzle(v){K(s).puzzle=v},completed:l});var d=ve(c,2),p=V(d);xu(p,{get count(){return r()}});var y=ve(p,2);da(y,{onclick:()=>z(a,!0)});var _=ve(u,2);_n(_,()=>K(a),v=>{bu(v,{close:()=>z(a,!1)})}),Q(t,f),ht()}qo(Eu,{target:document.body,props:{}});
